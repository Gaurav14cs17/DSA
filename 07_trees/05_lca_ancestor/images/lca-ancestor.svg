<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 700">
  <rect width="950" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="40" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">LCA &amp; Ancestor Problems</text>
  <text x="475" y="65" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">Lowest Common Ancestor â€¢ Binary Lifting â€¢ Kth Ancestor</text>
  
  <!-- LCA Binary Tree Section -->
  <g transform="translate(50, 100)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">LCA IN BINARY TREE</text>
    <text x="0" y="20" font-family="Courier New, monospace" font-size="11" fill="#888888">Find LCA(5, 1)</text>
    
    <g transform="translate(50, 45)">
      <line x1="80" y1="20" x2="40" y2="70" stroke="#4ade80" stroke-width="2"/>
      <line x1="80" y1="20" x2="120" y2="70" stroke="#4ade80" stroke-width="2"/>
      <line x1="40" y1="90" x2="20" y2="140" stroke="#3b82f6" stroke-width="2"/>
      <line x1="40" y1="90" x2="60" y2="140" stroke="#3b82f6" stroke-width="2"/>
      <line x1="120" y1="90" x2="100" y2="140" stroke="#3b82f6" stroke-width="2"/>
      <line x1="120" y1="90" x2="140" y2="140" stroke="#3b82f6" stroke-width="2"/>
      
      <!-- LCA Node -->
      <circle cx="80" cy="20" r="22" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
      <text x="80" y="26" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
      <text x="110" y="20" font-family="Courier New, monospace" font-size="10" fill="#4ade80">LCA</text>
      
      <!-- Target Node 5 -->
      <circle cx="40" cy="85" r="20" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="40" y="91" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
      <text x="68" y="85" font-family="Courier New, monospace" font-size="9" fill="#f97316">p</text>
      
      <!-- Target Node 1 -->
      <circle cx="120" cy="85" r="20" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="120" y="91" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
      <text x="148" y="85" font-family="Courier New, monospace" font-size="9" fill="#f97316">q</text>
      
      <circle cx="20" cy="150" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="20" y="155" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">6</text>
      
      <circle cx="60" cy="150" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="60" y="155" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
      
      <circle cx="100" cy="150" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="100" y="155" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">0</text>
      
      <circle cx="140" cy="150" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="140" y="155" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">8</text>
    </g>
    
    <text x="0" y="235" font-family="Courier New, monospace" font-size="11" fill="#888888">p in left, q in right â†’ root is LCA</text>
    <text x="0" y="255" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Time: O(n), Space: O(h)</text>
  </g>
  
  <!-- LCA in BST Section -->
  <g transform="translate(320, 100)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">LCA IN BST</text>
    <text x="0" y="20" font-family="Courier New, monospace" font-size="11" fill="#888888">Find LCA(2, 8)</text>
    
    <g transform="translate(50, 45)">
      <line x1="70" y1="20" x2="35" y2="70" stroke="#3b82f6" stroke-width="2"/>
      <line x1="70" y1="20" x2="105" y2="70" stroke="#3b82f6" stroke-width="2"/>
      <line x1="35" y1="90" x2="15" y2="135" stroke="#3b82f6" stroke-width="2"/>
      <line x1="35" y1="90" x2="55" y2="135" stroke="#3b82f6" stroke-width="2"/>
      <line x1="105" y1="90" x2="85" y2="135" stroke="#3b82f6" stroke-width="2"/>
      <line x1="105" y1="90" x2="125" y2="135" stroke="#3b82f6" stroke-width="2"/>
      
      <!-- LCA Node 6 -->
      <circle cx="70" cy="20" r="22" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
      <text x="70" y="26" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">6</text>
      <text x="100" y="20" font-family="Courier New, monospace" font-size="10" fill="#4ade80">LCA</text>
      
      <!-- Target p=2 -->
      <circle cx="35" cy="85" r="18" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="35" y="90" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
      <text x="58" y="85" font-family="Courier New, monospace" font-size="9" fill="#f97316">p</text>
      
      <!-- Target q=8 -->
      <circle cx="105" cy="85" r="18" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="105" y="90" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">8</text>
      <text x="128" y="85" font-family="Courier New, monospace" font-size="9" fill="#f97316">q</text>
      
      <circle cx="15" cy="145" r="14" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="15" y="150" font-family="Courier New, monospace" font-size="9" font-weight="bold" fill="#ffffff" text-anchor="middle">0</text>
      
      <circle cx="55" cy="145" r="14" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="55" y="150" font-family="Courier New, monospace" font-size="9" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
      
      <circle cx="85" cy="145" r="14" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="85" y="150" font-family="Courier New, monospace" font-size="9" font-weight="bold" fill="#ffffff" text-anchor="middle">7</text>
      
      <circle cx="125" cy="145" r="14" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="125" y="150" font-family="Courier New, monospace" font-size="9" font-weight="bold" fill="#ffffff" text-anchor="middle">9</text>
    </g>
    
    <text x="0" y="220" font-family="Courier New, monospace" font-size="11" fill="#888888">p &lt; root &lt; q â†’ root is LCA</text>
    <text x="0" y="240" font-family="Courier New, monospace" font-size="11" fill="#4ade80">BST property: O(h) only!</text>
  </g>
  
  <!-- Binary Lifting Section -->
  <g transform="translate(600, 100)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">BINARY LIFTING</text>
    <text x="0" y="20" font-family="Courier New, monospace" font-size="11" fill="#888888">Kth Ancestor in O(log k)</text>
    
    <g transform="translate(30, 45)">
      <!-- Tree structure -->
      <line x1="80" y1="20" x2="40" y2="65" stroke="#3b82f6" stroke-width="2"/>
      <line x1="80" y1="20" x2="120" y2="65" stroke="#3b82f6" stroke-width="2"/>
      <line x1="40" y1="85" x2="20" y2="125" stroke="#a78bfa" stroke-width="2"/>
      <line x1="40" y1="85" x2="60" y2="125" stroke="#3b82f6" stroke-width="2"/>
      
      <circle cx="80" cy="20" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="80" y="26" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">0</text>
      
      <circle cx="40" cy="80" r="16" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
      <text x="40" y="85" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
      
      <circle cx="120" cy="80" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="120" y="85" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
      
      <circle cx="20" cy="135" r="14" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="20" y="140" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
      
      <circle cx="60" cy="135" r="14" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="60" y="140" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
      
      <!-- Jump arrows -->
      <path d="M 20 120 Q 0 80 38 65" stroke="#f97316" stroke-width="2" fill="none" stroke-dasharray="4"/>
      <text x="-5" y="95" font-family="Courier New, monospace" font-size="9" fill="#f97316">2^0</text>
      
      <path d="M 15 120 Q -20 50 78 25" stroke="#a78bfa" stroke-width="2" fill="none" stroke-dasharray="4"/>
      <text x="-15" y="60" font-family="Courier New, monospace" font-size="9" fill="#a78bfa">2^1</text>
    </g>
    
    <text x="0" y="210" font-family="Courier New, monospace" font-size="10" fill="#888888">up[i][j] = 2^j ancestor of i</text>
    <text x="0" y="230" font-family="Courier New, monospace" font-size="10" fill="#888888">up[i][j] = up[up[i][j-1]][j-1]</text>
  </g>
  
  <!-- Algorithm Comparison -->
  <g transform="translate(50, 380)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">LCA APPROACHES</text>
    
    <g transform="translate(0, 30)">
      <rect x="0" y="0" width="200" height="100" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="100" y="25" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">DFS Recursive</text>
      <text x="100" y="48" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Binary Tree</text>
      <text x="100" y="68" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Time: O(n)</text>
      <text x="100" y="85" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Space: O(h)</text>
    </g>
    
    <g transform="translate(220, 30)">
      <rect x="0" y="0" width="200" height="100" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="100" y="25" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#f97316" text-anchor="middle">BST Property</text>
      <text x="100" y="48" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Binary Search Tree</text>
      <text x="100" y="68" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Time: O(h)</text>
      <text x="100" y="85" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Space: O(1)</text>
    </g>
    
    <g transform="translate(440, 30)">
      <rect x="0" y="0" width="200" height="100" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="100" y="25" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#a78bfa" text-anchor="middle">Parent Pointers</text>
      <text x="100" y="48" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Two Pointer Technique</text>
      <text x="100" y="68" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Time: O(h)</text>
      <text x="100" y="85" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Space: O(1)</text>
    </g>
    
    <g transform="translate(660, 30)">
      <rect x="0" y="0" width="230" height="100" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="115" y="25" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ef4444" text-anchor="middle">Binary Lifting</text>
      <text x="115" y="48" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Multiple Queries</text>
      <text x="115" y="68" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Preprocess: O(n log n)</text>
      <text x="115" y="85" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Query: O(log n)</text>
    </g>
  </g>
  
  <!-- Distance Formula -->
  <g transform="translate(50, 530)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">DISTANCE BETWEEN NODES</text>
    
    <rect x="0" y="20" width="450" height="50" rx="5" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="225" y="52" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80" text-anchor="middle">dist(p,q) = depth(p) + depth(q) - 2Ã—depth(LCA)</text>
  </g>
  
  <!-- Key Algorithm -->
  <g transform="translate(530, 530)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">LCA ALGORITHM</text>
    
    <text x="0" y="30" font-family="Courier New, monospace" font-size="11" fill="#888888">1. If root == p or q, return root</text>
    <text x="0" y="50" font-family="Courier New, monospace" font-size="11" fill="#888888">2. Search left and right subtrees</text>
    <text x="0" y="70" font-family="Courier New, monospace" font-size="11" fill="#888888">3. If both non-null â†’ root is LCA</text>
    <text x="0" y="90" font-family="Courier New, monospace" font-size="11" fill="#888888">4. Return non-null child</text>
  </g>
  
  <!-- Key Insight Box -->
  <g transform="translate(50, 640)">
    <rect x="0" y="0" width="850" height="45" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="20" y="28" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#f97316">ðŸ’¡ KEY:</text>
    <text x="80" y="28" font-family="Courier New, monospace" font-size="11" fill="#ffffff">LCA = split point where paths to p and q diverge. A node CAN be its own ancestor!</text>
  </g>
</svg>

