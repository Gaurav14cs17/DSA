<svg viewBox="0 0 1000 750" xmlns="http://www.w3.org/2000/svg">
  <rect width="1000" height="750" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="500" y="30" font-family="Courier New, monospace" font-size="22" font-weight="bold" fill="#ffffff" text-anchor="middle">Position Pointer Animation: Mg(OH)2</text>
  <text x="500" y="55" font-family="Courier New, monospace" font-size="12" fill="#888888" text-anchor="middle">Watch how pos moves through the string step by step</text>
  
  <!-- Frame 1: pos=0 -->
  <rect x="50" y="80" width="400" height="120" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="70" y="105" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 1: parseAtom() - Start</text>
  
  <rect x="80" y="120" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
  <text x="97" y="143" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#4ade80" text-anchor="middle">M</text>
  <rect x="120" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="137" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">g</text>
  <rect x="160" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="177" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">(</text>
  <rect x="200" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="217" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">O</text>
  <rect x="240" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="257" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">H</text>
  <rect x="280" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="297" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">)</text>
  <rect x="320" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="337" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">2</text>
  
  <!-- Pointer -->
  <polygon points="97,165 92,175 102,175" fill="#4ade80"/>
  <text x="97" y="190" font-family="Courier New, monospace" font-size="10" fill="#4ade80" text-anchor="middle">pos=0</text>
  
  <text x="380" y="145" font-family="Courier New, monospace" font-size="10" fill="#ffffff">→ Uppercase!</text>
  <text x="380" y="165" font-family="Courier New, monospace" font-size="10" fill="#4ade80">Start atom</text>
  
  <!-- Frame 2: pos=1 -->
  <rect x="500" y="80" width="400" height="120" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="520" y="105" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 2: Continue atom</text>
  
  <rect x="530" y="120" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="547" y="143" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">M</text>
  <rect x="570" y="120" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
  <text x="587" y="143" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#4ade80" text-anchor="middle">g</text>
  <rect x="610" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="627" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">(</text>
  <rect x="650" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="667" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">O</text>
  <rect x="690" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="707" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">H</text>
  <rect x="730" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="747" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">)</text>
  <rect x="770" y="120" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="787" y="143" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">2</text>
  
  <polygon points="587,165 582,175 592,175" fill="#4ade80"/>
  <text x="587" y="190" font-family="Courier New, monospace" font-size="10" fill="#4ade80" text-anchor="middle">pos=1</text>
  
  <text x="830" y="145" font-family="Courier New, monospace" font-size="10" fill="#ffffff">→ lowercase</text>
  <text x="830" y="165" font-family="Courier New, monospace" font-size="10" fill="#888888">add to atom</text>
  
  <!-- Frame 3: pos=2 -->
  <rect x="50" y="220" width="400" height="120" rx="8" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="70" y="245" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 3: See '(' - Enter Group</text>
  
  <rect x="80" y="260" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="97" y="283" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">M</text>
  <rect x="120" y="260" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="137" y="283" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">g</text>
  <rect x="160" y="260" width="35" height="35" rx="3" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
  <text x="177" y="283" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#f97316" text-anchor="middle">(</text>
  <rect x="200" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="217" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">O</text>
  <rect x="240" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="257" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">H</text>
  <rect x="280" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="297" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">)</text>
  <rect x="320" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="337" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">2</text>
  
  <polygon points="177,305 172,315 182,315" fill="#f97316"/>
  <text x="177" y="330" font-family="Courier New, monospace" font-size="10" fill="#f97316" text-anchor="middle">pos=2</text>
  
  <text x="380" y="280" font-family="Courier New, monospace" font-size="10" fill="#ffffff">→ '('</text>
  <text x="380" y="300" font-family="Courier New, monospace" font-size="10" fill="#f97316">RECURSE!</text>
  <text x="380" y="320" font-family="Courier New, monospace" font-size="10" fill="#888888">Skip &amp; enter</text>
  
  <!-- Frame 4: pos=3 inside -->
  <rect x="500" y="220" width="400" height="120" rx="8" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="520" y="245" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 4: Inside group - Parse O</text>
  
  <rect x="530" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="547" y="283" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">M</text>
  <rect x="570" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="587" y="283" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">g</text>
  <rect x="610" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="627" y="283" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">(</text>
  <rect x="650" y="260" width="35" height="35" rx="3" fill="#2d1f3d" stroke="#a78bfa" stroke-width="3"/>
  <text x="667" y="283" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#a78bfa" text-anchor="middle">O</text>
  <rect x="690" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="707" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">H</text>
  <rect x="730" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="747" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">)</text>
  <rect x="770" y="260" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="787" y="283" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">2</text>
  
  <polygon points="667,305 662,315 672,315" fill="#a78bfa"/>
  <text x="667" y="330" font-family="Courier New, monospace" font-size="10" fill="#a78bfa" text-anchor="middle">pos=3</text>
  
  <text x="830" y="270" font-family="Courier New, monospace" font-size="10" fill="#a78bfa">NESTED!</text>
  <text x="830" y="290" font-family="Courier New, monospace" font-size="10" fill="#ffffff">→ Uppercase</text>
  <text x="830" y="310" font-family="Courier New, monospace" font-size="10" fill="#888888">Parse O</text>
  
  <!-- Frame 5: pos=4 -->
  <rect x="50" y="360" width="400" height="120" rx="8" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="70" y="385" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 5: Inside group - Parse H</text>
  
  <rect x="80" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="97" y="423" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">M</text>
  <rect x="120" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="137" y="423" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">g</text>
  <rect x="160" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="177" y="423" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">(</text>
  <rect x="200" y="400" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="217" y="423" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">O</text>
  <rect x="240" y="400" width="35" height="35" rx="3" fill="#2d1f3d" stroke="#a78bfa" stroke-width="3"/>
  <text x="257" y="423" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#a78bfa" text-anchor="middle">H</text>
  <rect x="280" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="297" y="423" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">)</text>
  <rect x="320" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="337" y="423" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">2</text>
  
  <polygon points="257,445 252,455 262,455" fill="#a78bfa"/>
  <text x="257" y="470" font-family="Courier New, monospace" font-size="10" fill="#a78bfa" text-anchor="middle">pos=4</text>
  
  <text x="380" y="430" font-family="Courier New, monospace" font-size="10" fill="#ffffff">→ Uppercase</text>
  <text x="380" y="450" font-family="Courier New, monospace" font-size="10" fill="#4ade80">Parse H</text>
  
  <!-- Frame 6: pos=5 see ) -->
  <rect x="500" y="360" width="400" height="120" rx="8" fill="#1f0f0f" stroke="#ef4444" stroke-width="2"/>
  <text x="520" y="385" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 6: See ')' - Exit nested</text>
  
  <rect x="530" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="547" y="423" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">M</text>
  <rect x="570" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="587" y="423" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">g</text>
  <rect x="610" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="627" y="423" font-family="Courier New, monospace" font-size="16" fill="#555555" text-anchor="middle">(</text>
  <rect x="650" y="400" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="667" y="423" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">O</text>
  <rect x="690" y="400" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="707" y="423" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">H</text>
  <rect x="730" y="400" width="35" height="35" rx="3" fill="#1f0f0f" stroke="#ef4444" stroke-width="3"/>
  <text x="747" y="423" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ef4444" text-anchor="middle">)</text>
  <rect x="770" y="400" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="787" y="423" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">2</text>
  
  <polygon points="747,445 742,455 752,455" fill="#ef4444"/>
  <text x="747" y="470" font-family="Courier New, monospace" font-size="10" fill="#ef4444" text-anchor="middle">pos=5</text>
  
  <text x="830" y="420" font-family="Courier New, monospace" font-size="10" fill="#ef4444">→ ')'</text>
  <text x="830" y="440" font-family="Courier New, monospace" font-size="10" fill="#ffffff">STOP nested</text>
  <text x="830" y="460" font-family="Courier New, monospace" font-size="10" fill="#888888">Return {O:1,H:1}</text>
  
  <!-- Frame 7: pos=6 multiply -->
  <rect x="50" y="500" width="400" height="120" rx="8" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="70" y="525" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 7: Read multiplier '2'</text>
  
  <rect x="80" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="97" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">M</text>
  <rect x="120" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="137" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">g</text>
  <rect x="160" y="540" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="177" y="563" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">(</text>
  <rect x="200" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="217" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">O</text>
  <rect x="240" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="257" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">H</text>
  <rect x="280" y="540" width="35" height="35" rx="3" fill="#0f0f23" stroke="#888888" stroke-width="1"/>
  <text x="297" y="563" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">)</text>
  <rect x="320" y="540" width="35" height="35" rx="3" fill="#2d1f3d" stroke="#a78bfa" stroke-width="3"/>
  <text x="337" y="563" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#a78bfa" text-anchor="middle">2</text>
  
  <polygon points="337,585 332,595 342,595" fill="#a78bfa"/>
  <text x="337" y="610" font-family="Courier New, monospace" font-size="10" fill="#a78bfa" text-anchor="middle">pos=6</text>
  
  <text x="380" y="560" font-family="Courier New, monospace" font-size="10" fill="#a78bfa">→ DIGIT</text>
  <text x="380" y="580" font-family="Courier New, monospace" font-size="10" fill="#ffffff">mult = 2</text>
  <text x="380" y="600" font-family="Courier New, monospace" font-size="10" fill="#4ade80">{O:2, H:2}</text>
  
  <!-- Frame 8: Final -->
  <rect x="500" y="500" width="400" height="120" rx="8" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
  <text x="520" y="525" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560">Frame 8: DONE - Merge all</text>
  
  <rect x="530" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="547" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">M</text>
  <rect x="570" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="587" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">g</text>
  <rect x="610" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="627" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">(</text>
  <rect x="650" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="667" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">O</text>
  <rect x="690" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="707" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">H</text>
  <rect x="730" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="747" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">)</text>
  <rect x="770" y="540" width="35" height="35" rx="3" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="787" y="563" font-family="Courier New, monospace" font-size="16" fill="#4ade80" text-anchor="middle">2</text>
  
  <text x="830" y="545" font-family="Courier New, monospace" font-size="10" fill="#ffffff">pos=7 END</text>
  <text x="830" y="565" font-family="Courier New, monospace" font-size="10" fill="#888888">{Mg:1}+{O:2,H:2}</text>
  
  <rect x="820" y="580" width="80" height="25" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="860" y="598" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#4ade80" text-anchor="middle">H2MgO2</text>
  
  <!-- Legend -->
  <rect x="50" y="640" width="900" height="50" rx="6" fill="#0f0f23" stroke="#3b82f6" stroke-width="1"/>
  <text x="80" y="670" font-family="Courier New, monospace" font-size="10" fill="#888888">Legend:</text>
  <rect x="140" y="655" width="15" height="15" fill="#4ade80"/>
  <text x="165" y="667" font-family="Courier New, monospace" font-size="9" fill="#ffffff">Parsed</text>
  <rect x="230" y="655" width="15" height="15" fill="#f97316"/>
  <text x="255" y="667" font-family="Courier New, monospace" font-size="9" fill="#ffffff">'(' Enter</text>
  <rect x="330" y="655" width="15" height="15" fill="#a78bfa"/>
  <text x="355" y="667" font-family="Courier New, monospace" font-size="9" fill="#ffffff">Nested level</text>
  <rect x="450" y="655" width="15" height="15" fill="#ef4444"/>
  <text x="475" y="667" font-family="Courier New, monospace" font-size="9" fill="#ffffff">')' Exit</text>
  <rect x="550" y="655" width="15" height="15" fill="#0f0f23" stroke="#888888" stroke-dasharray="3,2"/>
  <text x="575" y="667" font-family="Courier New, monospace" font-size="9" fill="#ffffff">Out of scope</text>
</svg>

