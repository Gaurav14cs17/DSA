<svg viewBox="0 0 950 650" xmlns="http://www.w3.org/2000/svg">
  <rect width="950" height="650" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="35" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">Memoization: Cache Lookup Flow</text>
  <text x="475" y="58" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">Fibonacci with memoization - O(n) time complexity</text>
  
  <!-- Function call box -->
  <rect x="380" y="80" width="190" height="50" rx="8" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
  <text x="475" y="112" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">fib(n)</text>
  
  <!-- Arrow to decision -->
  <line x1="475" y1="130" x2="475" y2="160" stroke="#f97316" stroke-width="2"/>
  <polygon points="475,170 470,160 480,160" fill="#f97316"/>
  
  <!-- Decision diamond: In cache? -->
  <polygon points="475,180 560,230 475,280 390,230" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="475" y="225" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">n in</text>
  <text x="475" y="243" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="middle">memo?</text>
  
  <!-- YES branch (left) - Cache hit -->
  <line x1="390" y1="230" x2="270" y2="230" stroke="#4ade80" stroke-width="2"/>
  <text x="330" y="220" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80">YES</text>
  <polygon points="260,230 270,225 270,235" fill="#4ade80"/>
  
  <rect x="120" y="200" width="140" height="60" rx="6" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="190" y="225" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">CACHE HIT</text>
  <text x="190" y="245" font-family="Courier New, monospace" font-size="12" fill="#ffffff" text-anchor="middle">return memo[n]</text>
  
  <!-- Time indicator for cache hit -->
  <text x="190" y="275" font-family="Courier New, monospace" font-size="10" fill="#60a5fa" text-anchor="middle">O(1) lookup</text>
  
  <!-- NO branch (right) - Cache miss -->
  <line x1="560" y1="230" x2="680" y2="230" stroke="#ef4444" stroke-width="2"/>
  <text x="620" y="220" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ef4444">NO</text>
  <polygon points="690,230 680,225 680,235" fill="#ef4444"/>
  
  <rect x="690" y="200" width="140" height="60" rx="6" fill="#1f0f0f" stroke="#ef4444" stroke-width="2"/>
  <text x="760" y="225" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ef4444" text-anchor="middle">CACHE MISS</text>
  <text x="760" y="245" font-family="Courier New, monospace" font-size="12" fill="#ffffff" text-anchor="middle">compute value</text>
  
  <!-- Compute flow -->
  <line x1="760" y1="260" x2="760" y2="290" stroke="#ef4444" stroke-width="2"/>
  <polygon points="760,300 755,290 765,290" fill="#ef4444"/>
  
  <!-- Base case check -->
  <polygon points="760,310 830,350 760,390 690,350" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="760" y="345" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">n ≤ 1?</text>
  
  <!-- Base case YES -->
  <line x1="830" y1="350" x2="880" y2="350" stroke="#4ade80" stroke-width="2"/>
  <text x="855" y="340" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#4ade80">YES</text>
  <rect x="875" y="330" width="55" height="40" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="902" y="355" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">n</text>
  
  <!-- Base case NO - recursive calls -->
  <line x1="760" y1="390" x2="760" y2="420" stroke="#3b82f6" stroke-width="2"/>
  <text x="775" y="410" font-family="Courier New, monospace" font-size="10" font-weight="bold" fill="#3b82f6">NO</text>
  <polygon points="760,430 755,420 765,420" fill="#3b82f6"/>
  
  <!-- Recursive computation box -->
  <rect x="640" y="440" width="240" height="70" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="760" y="465" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560" text-anchor="middle">RECURSIVE CALLS</text>
  <text x="760" y="490" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">fib(n-1) + fib(n-2)</text>
  
  <!-- Store in cache -->
  <line x1="640" y1="475" x2="520" y2="475" stroke="#f97316" stroke-width="2"/>
  <polygon points="510,475 520,470 520,480" fill="#f97316"/>
  
  <rect x="330" y="445" width="180" height="60" rx="6" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="420" y="470" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#f97316" text-anchor="middle">STORE IN CACHE</text>
  <text x="420" y="490" font-family="Courier New, monospace" font-size="12" fill="#ffffff" text-anchor="middle">memo[n] = result</text>
  
  <!-- Return result -->
  <line x1="420" y1="505" x2="420" y2="540" stroke="#4ade80" stroke-width="2"/>
  <polygon points="420,550 415,540 425,540" fill="#4ade80"/>
  
  <rect x="340" y="555" width="160" height="40" rx="6" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
  <text x="420" y="581" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80" text-anchor="middle">return result</text>
  
  <!-- Connect cache hit to return -->
  <line x1="190" y1="260" x2="190" y2="575" stroke="#4ade80" stroke-width="2" stroke-dasharray="5,3"/>
  <line x1="190" y1="575" x2="340" y2="575" stroke="#4ade80" stroke-width="2" stroke-dasharray="5,3"/>
  
  <!-- Cache visualization on left -->
  <rect x="30" y="320" width="200" height="260" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="130" y="348" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560" text-anchor="middle">memo = {}</text>
  
  <!-- Cache entries -->
  <rect x="50" y="365" width="160" height="28" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="70" y="384" font-family="Courier New, monospace" font-size="12" fill="#4ade80">0:</text>
  <text x="100" y="384" font-family="Courier New, monospace" font-size="12" fill="#ffffff">0</text>
  
  <rect x="50" y="398" width="160" height="28" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="70" y="417" font-family="Courier New, monospace" font-size="12" fill="#4ade80">1:</text>
  <text x="100" y="417" font-family="Courier New, monospace" font-size="12" fill="#ffffff">1</text>
  
  <rect x="50" y="431" width="160" height="28" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="70" y="450" font-family="Courier New, monospace" font-size="12" fill="#4ade80">2:</text>
  <text x="100" y="450" font-family="Courier New, monospace" font-size="12" fill="#ffffff">1</text>
  
  <rect x="50" y="464" width="160" height="28" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="70" y="483" font-family="Courier New, monospace" font-size="12" fill="#4ade80">3:</text>
  <text x="100" y="483" font-family="Courier New, monospace" font-size="12" fill="#ffffff">2</text>
  
  <rect x="50" y="497" width="160" height="28" rx="4" fill="#0f2f1f" stroke="#4ade80" stroke-width="1"/>
  <text x="70" y="516" font-family="Courier New, monospace" font-size="12" fill="#4ade80">4:</text>
  <text x="100" y="516" font-family="Courier New, monospace" font-size="12" fill="#ffffff">3</text>
  
  <rect x="50" y="530" width="160" height="28" rx="4" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="70" y="549" font-family="Courier New, monospace" font-size="12" fill="#f97316">5:</text>
  <text x="100" y="549" font-family="Courier New, monospace" font-size="12" fill="#ffffff">5</text>
  <text x="140" y="549" font-family="Courier New, monospace" font-size="10" fill="#888888">← new</text>
  
  <!-- Complexity box -->
  <rect x="560" y="555" width="350" height="80" rx="6" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="735" y="580" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#a78bfa" text-anchor="middle">Complexity Analysis</text>
  <text x="590" y="605" font-family="Courier New, monospace" font-size="11" fill="#ffffff">Time:  O(n) - each state computed once</text>
  <text x="590" y="625" font-family="Courier New, monospace" font-size="11" fill="#ffffff">Space: O(n) - cache + recursion stack</text>
</svg>

