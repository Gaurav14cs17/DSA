<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 700">
  <rect width="950" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="40" text-anchor="middle" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff">Dutch National Flag Algorithm</text>
  <text x="475" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="16" fill="#888888">Sort Colors (LeetCode 75) - 3-Way Partition</text>
  
  <!-- Region legend -->
  <rect x="50" y="90" width="850" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="8"/>
  <rect x="70" y="105" width="20" height="20" fill="#ef4444"/>
  <text x="100" y="120" font-family="Courier New, monospace" font-size="12" fill="#ffffff">0s (Red)</text>
  <rect x="200" y="105" width="20" height="20" fill="#ffffff"/>
  <text x="230" y="120" font-family="Courier New, monospace" font-size="12" fill="#ffffff">1s (White)</text>
  <rect x="350" y="105" width="20" height="20" fill="#888888"/>
  <text x="380" y="120" font-family="Courier New, monospace" font-size="12" fill="#ffffff">Unknown</text>
  <rect x="500" y="105" width="20" height="20" fill="#3b82f6"/>
  <text x="530" y="120" font-family="Courier New, monospace" font-size="12" fill="#ffffff">2s (Blue)</text>
  <text x="700" y="120" font-family="Courier New, monospace" font-size="12" fill="#888888">[low, mid) = 1s | [mid, high] = unknown</text>
  
  <!-- Initial State -->
  <text x="50" y="180" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">Initial: [2, 0, 2, 1, 1, 0]</text>
  
  <g transform="translate(50, 200)">
    <rect x="0" y="0" width="60" height="45" fill="#3b82f6" stroke="#60a5fa" stroke-width="2"/>
    <text x="30" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
    <text x="30" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#f97316">L,M</text>
    
    <rect x="70" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="100" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    
    <rect x="140" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="170" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
    
    <rect x="210" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="240" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    
    <rect x="280" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="310" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    
    <rect x="350" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="380" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    <text x="380" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#a78bfa">H</text>
  </g>
  
  <!-- Step 1: arr[M]=2, swap with H -->
  <text x="50" y="300" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">Step 1: arr[M]=2, swap with H, H--</text>
  
  <g transform="translate(50, 320)">
    <rect x="0" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="30" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    <text x="30" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#f97316">L,M</text>
    
    <rect x="70" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="100" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    
    <rect x="140" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="170" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
    
    <rect x="210" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="240" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    
    <rect x="280" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="310" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    <text x="310" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#a78bfa">H</text>
    
    <rect x="350" y="0" width="60" height="45" fill="#3b82f6" stroke="#60a5fa" stroke-width="2"/>
    <text x="380" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
  </g>
  
  <!-- Step 2: arr[M]=0, swap L, L++, M++ -->
  <text x="50" y="420" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">Step 2-3: arr[M]=0, L++, M++</text>
  
  <g transform="translate(50, 440)">
    <rect x="0" y="0" width="60" height="45" fill="#ef4444" stroke="#f97316" stroke-width="2"/>
    <text x="30" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    
    <rect x="70" y="0" width="60" height="45" fill="#ef4444" stroke="#f97316" stroke-width="2"/>
    <text x="100" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    
    <rect x="140" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="170" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
    <text x="170" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#f97316">L,M</text>
    
    <rect x="210" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="240" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    
    <rect x="280" y="0" width="60" height="45" fill="#888888" stroke="#aaaaaa" stroke-width="2"/>
    <text x="310" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    <text x="310" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#a78bfa">H</text>
    
    <rect x="350" y="0" width="60" height="45" fill="#3b82f6" stroke="#60a5fa" stroke-width="2"/>
    <text x="380" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
  </g>
  
  <!-- Final Result -->
  <text x="50" y="540" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">Final: [0, 0, 1, 1, 2, 2] ✓ Sorted!</text>
  
  <g transform="translate(50, 560)">
    <rect x="0" y="0" width="60" height="45" fill="#ef4444" stroke="#f97316" stroke-width="3"/>
    <text x="30" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    
    <rect x="70" y="0" width="60" height="45" fill="#ef4444" stroke="#f97316" stroke-width="3"/>
    <text x="100" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">0</text>
    
    <rect x="140" y="0" width="60" height="45" fill="#ffffff" stroke="#888888" stroke-width="3"/>
    <text x="170" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#0f0f23">1</text>
    
    <rect x="210" y="0" width="60" height="45" fill="#ffffff" stroke="#888888" stroke-width="3"/>
    <text x="240" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#0f0f23">1</text>
    
    <rect x="280" y="0" width="60" height="45" fill="#3b82f6" stroke="#60a5fa" stroke-width="3"/>
    <text x="310" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
    
    <rect x="350" y="0" width="60" height="45" fill="#3b82f6" stroke="#60a5fa" stroke-width="3"/>
    <text x="380" y="30" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
  </g>
  
  <!-- Algorithm box -->
  <rect x="480" y="180" width="440" height="220" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="8"/>
  <text x="700" y="210" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa">3-WAY PARTITION RULES</text>
  
  <text x="500" y="245" font-family="Courier New, monospace" font-size="12" fill="#ef4444">if arr[mid] == 0:</text>
  <text x="520" y="265" font-family="Courier New, monospace" font-size="11" fill="#ffffff">swap(arr[low], arr[mid])</text>
  <text x="520" y="285" font-family="Courier New, monospace" font-size="11" fill="#ffffff">low++, mid++</text>
  
  <text x="500" y="315" font-family="Courier New, monospace" font-size="12" fill="#ffffff">if arr[mid] == 1:</text>
  <text x="520" y="335" font-family="Courier New, monospace" font-size="11" fill="#ffffff">mid++ (already in place)</text>
  
  <text x="500" y="365" font-family="Courier New, monospace" font-size="12" fill="#3b82f6">if arr[mid] == 2:</text>
  <text x="520" y="385" font-family="Courier New, monospace" font-size="11" fill="#ffffff">swap(arr[mid], arr[high])</text>
  <text x="520" y="405" font-family="Courier New, monospace" font-size="11" fill="#888888">high-- (don't move mid!)</text>
  
  <!-- Invariants box -->
  <rect x="480" y="420" width="440" height="130" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="8"/>
  <text x="700" y="450" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#3b82f6">INVARIANTS</text>
  <text x="500" y="480" font-family="Courier New, monospace" font-size="11" fill="#ef4444">[0, low)      → all 0s</text>
  <text x="500" y="500" font-family="Courier New, monospace" font-size="11" fill="#ffffff">[low, mid)    → all 1s</text>
  <text x="500" y="520" font-family="Courier New, monospace" font-size="11" fill="#888888">[mid, high]   → unknown</text>
  <text x="500" y="540" font-family="Courier New, monospace" font-size="11" fill="#3b82f6">(high, n)     → all 2s</text>
  
  <!-- Complexity -->
  <rect x="480" y="570" width="440" height="60" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="8"/>
  <text x="700" y="600" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Time: O(n) single pass | Space: O(1)</text>
  <text x="700" y="620" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">Dijkstra's 3-way partition algorithm</text>
</svg>
