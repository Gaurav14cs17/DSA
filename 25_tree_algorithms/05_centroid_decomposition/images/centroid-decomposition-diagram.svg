<svg viewBox="0 0 950 700" xmlns="http://www.w3.org/2000/svg">
  <rect width="950" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="40" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">Centroid Decomposition</text>
  <text x="475" y="65" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">Divide &amp; Conquer on Trees | O(n log n) Path Queries</text>
  
  <!-- Left: Original Tree -->
  <text x="60" y="105" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">ORIGINAL TREE</text>
  
  <!-- Nodes -->
  <circle cx="200" cy="160" r="22" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="200" y="166" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
  
  <circle cx="120" cy="240" r="22" fill="#0f2f1f" stroke="#4ade80" stroke-width="4"/>
  <text x="120" y="246" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
  <text x="120" y="280" font-family="Courier New, monospace" font-size="10" fill="#4ade80" text-anchor="middle">CENTROID</text>
  
  <circle cx="280" cy="240" r="22" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="280" y="246" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
  
  <circle cx="60" cy="320" r="22" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="60" y="326" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
  
  <circle cx="180" cy="320" r="22" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="180" y="326" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
  
  <circle cx="240" cy="320" r="22" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="240" y="326" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">6</text>
  
  <circle cx="320" cy="320" r="22" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="320" y="326" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">7</text>
  
  <!-- Edges -->
  <line x1="200" y1="182" x2="120" y2="218" stroke="#3b82f6" stroke-width="2"/>
  <line x1="200" y1="182" x2="280" y2="218" stroke="#3b82f6" stroke-width="2"/>
  <line x1="120" y1="262" x2="60" y2="298" stroke="#3b82f6" stroke-width="2"/>
  <line x1="120" y1="262" x2="180" y2="298" stroke="#3b82f6" stroke-width="2"/>
  <line x1="280" y1="262" x2="240" y2="298" stroke="#3b82f6" stroke-width="2"/>
  <line x1="280" y1="262" x2="320" y2="298" stroke="#3b82f6" stroke-width="2"/>
  
  <!-- Centroid Definition -->
  <rect x="40" y="360" width="300" height="70" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="190" y="385" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">CENTROID DEFINITION</text>
  <text x="190" y="410" font-family="Courier New, monospace" font-size="11" fill="#ffffff" text-anchor="middle">Node whose removal leaves no</text>
  <text x="190" y="425" font-family="Courier New, monospace" font-size="11" fill="#ffffff" text-anchor="middle">subtree with more than n/2 nodes</text>
  
  <!-- Arrow to decomposition -->
  <text x="380" y="250" font-family="Courier New, monospace" font-size="20" fill="#f97316">→</text>
  <text x="380" y="270" font-family="Courier New, monospace" font-size="10" fill="#888888">Remove</text>
  <text x="380" y="285" font-family="Courier New, monospace" font-size="10" fill="#888888">centroid</text>
  
  <!-- Right: After Removal -->
  <text x="480" y="105" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">AFTER CENTROID REMOVAL</text>
  
  <!-- Subtree 1: {1} -->
  <rect x="450" y="130" width="80" height="80" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="5" stroke-dasharray="5,3"/>
  <circle cx="490" cy="170" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="490" y="176" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
  <text x="490" y="200" font-family="Courier New, monospace" font-size="9" fill="#f97316" text-anchor="middle">size=1</text>
  
  <!-- Subtree 2: {3,6,7} -->
  <rect x="550" y="130" width="120" height="110" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="5" stroke-dasharray="5,3"/>
  <circle cx="610" cy="160" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="610" y="166" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">3</text>
  
  <circle cx="580" cy="210" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="580" y="216" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">6</text>
  
  <circle cx="640" cy="210" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="640" y="216" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">7</text>
  
  <line x1="610" y1="178" x2="580" y2="192" stroke="#3b82f6" stroke-width="2"/>
  <line x1="610" y1="178" x2="640" y2="192" stroke="#3b82f6" stroke-width="2"/>
  <text x="610" y="235" font-family="Courier New, monospace" font-size="9" fill="#a78bfa" text-anchor="middle">size=3</text>
  
  <!-- Subtree 3: {4} -->
  <rect x="690" y="130" width="60" height="80" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="5" stroke-dasharray="5,3"/>
  <circle cx="720" cy="170" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="720" y="176" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">4</text>
  <text x="720" y="200" font-family="Courier New, monospace" font-size="9" fill="#4ade80" text-anchor="middle">size=1</text>
  
  <!-- Subtree 4: {5} -->
  <rect x="770" y="130" width="60" height="80" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="5" stroke-dasharray="5,3"/>
  <circle cx="800" cy="170" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="800" y="176" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">5</text>
  <text x="800" y="200" font-family="Courier New, monospace" font-size="9" fill="#4ade80" text-anchor="middle">size=1</text>
  
  <!-- Centroid Tree -->
  <text x="480" y="280" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">CENTROID TREE (RECURSIVELY BUILT)</text>
  
  <!-- Centroid tree structure -->
  <circle cx="620" cy="330" r="22" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
  <text x="620" y="336" font-family="Courier New, monospace" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
  <text x="620" y="360" font-family="Courier New, monospace" font-size="9" fill="#4ade80" text-anchor="middle">root</text>
  
  <circle cx="520" cy="410" r="18" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="520" y="416" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
  
  <circle cx="590" cy="410" r="18" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="590" y="416" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">3</text>
  
  <circle cx="660" cy="410" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="660" y="416" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">4</text>
  
  <circle cx="730" cy="410" r="18" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="730" y="416" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">5</text>
  
  <circle cx="560" cy="475" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="560" y="481" font-family="Courier New, monospace" font-size="12" fill="#ffffff" text-anchor="middle">6</text>
  
  <circle cx="620" cy="475" r="16" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="620" y="481" font-family="Courier New, monospace" font-size="12" fill="#ffffff" text-anchor="middle">7</text>
  
  <!-- Centroid tree edges -->
  <line x1="620" y1="352" x2="520" y2="392" stroke="#4ade80" stroke-width="2"/>
  <line x1="620" y1="352" x2="590" y2="392" stroke="#4ade80" stroke-width="2"/>
  <line x1="620" y1="352" x2="660" y2="392" stroke="#4ade80" stroke-width="2"/>
  <line x1="620" y1="352" x2="730" y2="392" stroke="#4ade80" stroke-width="2"/>
  <line x1="590" y1="428" x2="560" y2="459" stroke="#a78bfa" stroke-width="2"/>
  <line x1="590" y1="428" x2="620" y2="459" stroke="#a78bfa" stroke-width="2"/>
  
  <!-- Key Property -->
  <rect x="760" y="310" width="160" height="80" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="840" y="335" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#4ade80" text-anchor="middle">KEY PROPERTY</text>
  <text x="840" y="360" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Height = O(log n)</text>
  <text x="840" y="380" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Any path passes</text>
  <text x="840" y="395" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">O(log n) centroids</text>
  
  <!-- Algorithm Box -->
  <text x="60" y="460" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">ALGORITHM</text>
  
  <rect x="40" y="475" width="380" height="100" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="50" y="498" font-family="Courier New, monospace" font-size="11" fill="#4ade80">def decompose(tree):</text>
  <text x="60" y="516" font-family="Courier New, monospace" font-size="10" fill="#ffffff">1. Find centroid of tree</text>
  <text x="60" y="532" font-family="Courier New, monospace" font-size="10" fill="#ffffff">2. Remove centroid</text>
  <text x="60" y="548" font-family="Courier New, monospace" font-size="10" fill="#ffffff">3. Recursively decompose subtrees</text>
  <text x="60" y="564" font-family="Courier New, monospace" font-size="10" fill="#ffffff">4. Build centroid tree</text>
  
  <!-- Applications -->
  <text x="60" y="600" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">APPLICATIONS</text>
  
  <rect x="40" y="615" width="200" height="65" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="5"/>
  <text x="140" y="638" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#f97316" text-anchor="middle">Path Counting</text>
  <text x="140" y="658" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Count paths with sum = k</text>
  <text x="140" y="673" font-family="Courier New, monospace" font-size="10" fill="#60a5fa" text-anchor="middle">O(n log n)</text>
  
  <rect x="260" y="615" width="200" height="65" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="5"/>
  <text x="360" y="638" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#a78bfa" text-anchor="middle">Distance Queries</text>
  <text x="360" y="658" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Pairs at distance k</text>
  <text x="360" y="673" font-family="Courier New, monospace" font-size="10" fill="#60a5fa" text-anchor="middle">O(n log n)</text>
  
  <!-- Complexity -->
  <rect x="480" y="520" width="200" height="90" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="5"/>
  <text x="580" y="545" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80" text-anchor="middle">COMPLEXITY</text>
  <text x="580" y="570" font-family="Courier New, monospace" font-size="11" fill="#ffffff" text-anchor="middle">Decomposition: O(n log n)</text>
  <text x="580" y="590" font-family="Courier New, monospace" font-size="11" fill="#ffffff" text-anchor="middle">Query: O(log n) to O(log² n)</text>
  <text x="580" y="605" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">Space: O(n)</text>
  
  <!-- Path through centroid explanation -->
  <rect x="700" y="520" width="220" height="90" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="810" y="545" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#3b82f6" text-anchor="middle">PATH COUNTING IDEA</text>
  <text x="810" y="568" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">Every path passes through</text>
  <text x="810" y="585" font-family="Courier New, monospace" font-size="10" fill="#ffffff" text-anchor="middle">exactly one centroid ancestor</text>
  <text x="810" y="602" font-family="Courier New, monospace" font-size="10" fill="#f97316" text-anchor="middle">→ Count paths through centroid</text>
</svg>
