<svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="600" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff">Miller-Rabin Primality Test</text>
  <text x="450" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="16" fill="#888888">Probabilistic primality testing in O(k log³ n)</text>
  
  <!-- Theory box -->
  <rect x="50" y="90" width="800" height="90" rx="8" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="450" y="115" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">FERMAT'S LITTLE THEOREM</text>
  <text x="450" y="140" text-anchor="middle" font-family="Courier New, monospace" font-size="14" fill="#ffffff">If p is prime: a^(p-1) ≡ 1 (mod p) for all a coprime to p</text>
  <text x="450" y="165" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#a78bfa">Miller-Rabin adds: check for nontrivial square roots of 1</text>
  
  <!-- Algorithm steps -->
  <rect x="50" y="200" width="400" height="200" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="250" y="225" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">ALGORITHM STEPS</text>
  
  <text x="70" y="255" font-family="Courier New, monospace" font-size="12" fill="#ffffff">1. Write n-1 = 2^r × d (d is odd)</text>
  <text x="70" y="280" font-family="Courier New, monospace" font-size="12" fill="#ffffff">2. Pick random a in [2, n-2]</text>
  <text x="70" y="305" font-family="Courier New, monospace" font-size="12" fill="#ffffff">3. Compute x = a^d mod n</text>
  <text x="70" y="330" font-family="Courier New, monospace" font-size="12" fill="#ffffff">4. If x = 1 or x = n-1: pass</text>
  <text x="70" y="355" font-family="Courier New, monospace" font-size="12" fill="#ffffff">5. Square x up to r-1 times</text>
  <text x="70" y="380" font-family="Courier New, monospace" font-size="12" fill="#ffffff">6. If x = n-1 at any step: pass</text>
  
  <!-- Example -->
  <rect x="480" y="200" width="370" height="200" rx="8" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="665" y="225" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">EXAMPLE: Test n = 221</text>
  
  <text x="500" y="255" font-family="Courier New, monospace" font-size="11" fill="#ffffff">n-1 = 220 = 2² × 55, so r=2, d=55</text>
  <text x="500" y="280" font-family="Courier New, monospace" font-size="11" fill="#ffffff">Witness a = 174:</text>
  <text x="500" y="300" font-family="Courier New, monospace" font-size="11" fill="#ffffff">  x = 174^55 mod 221 = 47</text>
  <text x="500" y="320" font-family="Courier New, monospace" font-size="11" fill="#ffffff">  x ≠ 1, x ≠ 220</text>
  <text x="500" y="340" font-family="Courier New, monospace" font-size="11" fill="#ffffff">  x = 47² mod 221 = 220 ✓ PASS</text>
  <text x="500" y="365" font-family="Courier New, monospace" font-size="11" fill="#f97316">Witness a = 137:</text>
  <text x="500" y="385" font-family="Courier New, monospace" font-size="11" fill="#ef4444">  Neither condition met → COMPOSITE</text>
  
  <!-- Carmichael warning -->
  <rect x="50" y="420" width="400" height="80" rx="8" fill="#1f0f0f" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="250" y="450" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#ef4444">⚠ CARMICHAEL NUMBERS</text>
  <text x="70" y="480" font-family="Courier New, monospace" font-size="11" fill="#ffffff">Fool Fermat test: 561, 1105, 1729, 2465...</text>
  <text x="70" y="495" font-family="Courier New, monospace" font-size="11" fill="#4ade80">Miller-Rabin detects these correctly!</text>
  
  <!-- Deterministic witnesses -->
  <rect x="480" y="420" width="370" height="80" rx="8" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="665" y="450" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">DETERMINISTIC WITNESSES</text>
  <text x="500" y="475" font-family="Courier New, monospace" font-size="10" fill="#ffffff">n &lt; 2,047: test a = 2</text>
  <text x="500" y="490" font-family="Courier New, monospace" font-size="10" fill="#ffffff">n &lt; 3,215,031,751: test a = 2,3,5,7</text>
  
  <!-- Complexity -->
  <rect x="200" y="520" width="500" height="55" rx="8" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="450" y="545" text-anchor="middle" font-family="Courier New, monospace" font-size="14" fill="#ffffff">Error probability: &lt; 4^(-k) for k rounds</text>
  <text x="450" y="565" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Time: O(k log³ n) | k=10 gives error &lt; 10^(-6)</text>
</svg>
