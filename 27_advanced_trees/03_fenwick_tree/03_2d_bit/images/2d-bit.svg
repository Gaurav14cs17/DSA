<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <rect width="900" height="500" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="Courier New, monospace" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">2D Binary Indexed Tree</text>
  <text x="450" y="58" font-family="Courier New, monospace" font-size="14" fill="#888888" text-anchor="middle">2D Range Sum Queries • O(log m · log n) per operation</text>

  <!-- Matrix Visualization -->
  <text x="200" y="95" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560" text-anchor="middle">MATRIX SUM QUERY</text>
  
  <!-- Grid -->
  <rect x="80" y="115" width="240" height="180" fill="none" stroke="#3b82f6" stroke-width="1"/>
  
  <!-- Grid cells -->
  <line x1="140" y1="115" x2="140" y2="295" stroke="#3b82f6" stroke-width="1"/>
  <line x1="200" y1="115" x2="200" y2="295" stroke="#3b82f6" stroke-width="1"/>
  <line x1="260" y1="115" x2="260" y2="295" stroke="#3b82f6" stroke-width="1"/>
  
  <line x1="80" y1="160" x2="320" y2="160" stroke="#3b82f6" stroke-width="1"/>
  <line x1="80" y1="205" x2="320" y2="205" stroke="#3b82f6" stroke-width="1"/>
  <line x1="80" y1="250" x2="320" y2="250" stroke="#3b82f6" stroke-width="1"/>
  
  <!-- Query region highlighted -->
  <rect x="140" y="160" width="120" height="90" fill="#0f2f1f" fill-opacity="0.5" stroke="#4ade80" stroke-width="3"/>
  
  <!-- Cell values -->
  <text x="110" y="143" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">3</text>
  <text x="170" y="143" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">2</text>
  <text x="230" y="143" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
  <text x="290" y="143" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">4</text>
  
  <text x="110" y="188" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
  <text x="170" y="188" font-family="Courier New, monospace" font-size="14" fill="#4ade80" text-anchor="middle">5</text>
  <text x="230" y="188" font-family="Courier New, monospace" font-size="14" fill="#4ade80" text-anchor="middle">2</text>
  <text x="290" y="188" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">3</text>
  
  <text x="110" y="233" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">2</text>
  <text x="170" y="233" font-family="Courier New, monospace" font-size="14" fill="#4ade80" text-anchor="middle">3</text>
  <text x="230" y="233" font-family="Courier New, monospace" font-size="14" fill="#4ade80" text-anchor="middle">1</text>
  <text x="290" y="233" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">5</text>
  
  <text x="110" y="278" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">4</text>
  <text x="170" y="278" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">1</text>
  <text x="230" y="278" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">2</text>
  <text x="290" y="278" font-family="Courier New, monospace" font-size="14" fill="#ffffff" text-anchor="middle">6</text>

  <!-- Query annotation -->
  <text x="200" y="315" font-family="Courier New, monospace" font-size="11" fill="#4ade80" text-anchor="middle">Query sum of green region</text>
  <text x="200" y="330" font-family="Courier New, monospace" font-size="11" fill="#4ade80" text-anchor="middle">sumRegion(1,1,2,2) = 5+2+3+1 = 11</text>

  <!-- Formula Section -->
  <text x="650" y="95" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560" text-anchor="middle">2D SUM FORMULA</text>
  
  <rect x="470" y="115" width="360" height="110" fill="#0f0f23" stroke="#a78bfa" stroke-width="2"/>
  
  <text x="650" y="145" font-family="Courier New, monospace" font-size="11" fill="#ffffff" text-anchor="middle">sumRegion(r1, c1, r2, c2) =</text>
  <text x="650" y="170" font-family="Courier New, monospace" font-size="11" fill="#4ade80" text-anchor="middle">+ query(r2, c2)</text>
  <text x="650" y="190" font-family="Courier New, monospace" font-size="11" fill="#ef4444" text-anchor="middle">- query(r1-1, c2) - query(r2, c1-1)</text>
  <text x="650" y="210" font-family="Courier New, monospace" font-size="11" fill="#a78bfa" text-anchor="middle">+ query(r1-1, c1-1)</text>

  <!-- Code boxes -->
  <rect x="50" y="360" width="400" height="120" fill="#0f0f23" stroke="#f97316" stroke-width="2"/>
  <text x="250" y="385" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560" text-anchor="middle">2D UPDATE</text>
  
  <text x="70" y="410" font-family="Courier New, monospace" font-size="10" fill="#60a5fa">def update(row, col, delta):</text>
  <text x="90" y="430" font-family="Courier New, monospace" font-size="10" fill="#ffffff">i = row</text>
  <text x="90" y="450" font-family="Courier New, monospace" font-size="10" fill="#ffffff">while i &lt;= m:</text>
  <text x="110" y="468" font-family="Courier New, monospace" font-size="10" fill="#f97316">j = col</text>
  <text x="250" y="430" font-family="Courier New, monospace" font-size="10" fill="#ffffff">while j &lt;= n:</text>
  <text x="270" y="450" font-family="Courier New, monospace" font-size="10" fill="#ffffff">BIT[i][j] += delta</text>
  <text x="270" y="468" font-family="Courier New, monospace" font-size="10" fill="#f97316">j += j &amp; (-j)</text>
  <text x="110" y="468" font-family="Courier New, monospace" font-size="10" fill="#f97316">i += i &amp; (-i)</text>

  <rect x="470" y="360" width="380" height="120" fill="#0f0f23" stroke="#4ade80" stroke-width="2"/>
  <text x="660" y="385" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#e94560" text-anchor="middle">2D QUERY</text>
  
  <text x="490" y="410" font-family="Courier New, monospace" font-size="10" fill="#60a5fa">def query(row, col):</text>
  <text x="510" y="430" font-family="Courier New, monospace" font-size="10" fill="#ffffff">i, s = row, 0</text>
  <text x="510" y="450" font-family="Courier New, monospace" font-size="10" fill="#ffffff">while i &gt; 0:</text>
  <text x="530" y="468" font-family="Courier New, monospace" font-size="10" fill="#4ade80">j = col</text>
  <text x="660" y="430" font-family="Courier New, monospace" font-size="10" fill="#ffffff">while j &gt; 0:</text>
  <text x="680" y="450" font-family="Courier New, monospace" font-size="10" fill="#ffffff">s += BIT[i][j]</text>
  <text x="680" y="468" font-family="Courier New, monospace" font-size="10" fill="#4ade80">j -= j &amp; (-j)</text>
  <text x="530" y="468" font-family="Courier New, monospace" font-size="10" fill="#4ade80">i -= i &amp; (-i)</text>

  <!-- Complexity -->
  <text x="650" y="255" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#60a5fa" text-anchor="middle">Time: O(log m · log n)</text>
  <text x="650" y="275" font-family="Courier New, monospace" font-size="12" fill="#888888" text-anchor="middle">LC 308: Range Sum Query 2D - Mutable</text>
</svg>
