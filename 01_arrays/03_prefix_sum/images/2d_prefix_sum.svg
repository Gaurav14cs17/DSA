<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 500">
  <defs>
    <linearGradient id="bgGrad8" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="areaA" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#1e8449;stop-opacity:0.8" />
    </linearGradient>
    <linearGradient id="areaB" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:0.7" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:0.7" />
    </linearGradient>
    <linearGradient id="areaC" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:0.7" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:0.7" />
    </linearGradient>
    <linearGradient id="areaD" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:0.6" />
      <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:0.6" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="850" height="500" fill="url(#bgGrad8)"/>
  
  <!-- Title -->
  <text x="425" y="40" font-family="Segoe UI, Arial" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">2D Prefix Sum - Inclusion-Exclusion</text>
  <text x="425" y="65" font-family="Segoe UI, Arial" font-size="14" fill="#88ccff" text-anchor="middle">Submatrix sum in O(1) after O(m×n) preprocessing</text>
  
  <!-- Matrix Visualization -->
  <text x="80" y="105" font-family="Segoe UI, Arial" font-size="16" font-weight="bold" fill="#ffffff">Matrix with regions A, B, C, D:</text>
  
  <!-- Grid -->
  <g transform="translate(80, 120)">
    <!-- Background grid lines -->
    <rect x="0" y="0" width="280" height="200" fill="#0d1b2a" stroke="#4a5568" stroke-width="1"/>
    
    <!-- Row/Col labels -->
    <text x="-20" y="55" font-family="Consolas" font-size="12" fill="#aaa" text-anchor="middle">r1</text>
    <text x="-20" y="155" font-family="Consolas" font-size="12" fill="#aaa" text-anchor="middle">r2</text>
    <text x="50" y="-10" font-family="Consolas" font-size="12" fill="#aaa" text-anchor="middle">c1</text>
    <text x="230" y="-10" font-family="Consolas" font-size="12" fill="#aaa" text-anchor="middle">c2</text>
    
    <!-- Area D (overlap) - drawn first -->
    <rect x="0" y="0" width="100" height="100" fill="url(#areaD)" stroke="#9b59b6" stroke-width="2"/>
    <text x="50" y="55" font-family="Segoe UI, Arial" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">D</text>
    
    <!-- Area B -->
    <rect x="100" y="0" width="180" height="100" fill="url(#areaB)" stroke="#e74c3c" stroke-width="2"/>
    <text x="190" y="55" font-family="Segoe UI, Arial" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">B</text>
    
    <!-- Area C -->
    <rect x="0" y="100" width="100" height="100" fill="url(#areaC)" stroke="#3498db" stroke-width="2"/>
    <text x="50" y="155" font-family="Segoe UI, Arial" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">C</text>
    
    <!-- Area A (target) -->
    <rect x="100" y="100" width="180" height="100" fill="url(#areaA)" stroke="#2ecc71" stroke-width="3"/>
    <text x="190" y="155" font-family="Segoe UI, Arial" font-size="28" font-weight="bold" fill="#ffffff" text-anchor="middle">A</text>
    <text x="190" y="180" font-family="Segoe UI, Arial" font-size="12" fill="#ffffff" text-anchor="middle">(target)</text>
  </g>
  
  <!-- Formula Derivation -->
  <rect x="400" y="105" width="420" height="220" rx="10" fill="#0d1b2a" stroke="#4a90a4" stroke-width="2"/>
  <text x="610" y="135" font-family="Segoe UI, Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">Inclusion-Exclusion Formula:</text>
  
  <text x="430" y="170" font-family="Segoe UI, Arial" font-size="14" fill="#ffffff">To get area A (target region):</text>
  
  <text x="430" y="205" font-family="Consolas" font-size="14" fill="#9b59b6">P[r2][c2]</text>
  <text x="550" y="205" font-family="Segoe UI, Arial" font-size="13" fill="#aaa">= A + B + C + D</text>
  
  <text x="430" y="235" font-family="Consolas" font-size="14" fill="#e74c3c">- P[r1-1][c2]</text>
  <text x="550" y="235" font-family="Segoe UI, Arial" font-size="13" fill="#aaa">= -(B + D)</text>
  
  <text x="430" y="265" font-family="Consolas" font-size="14" fill="#3498db">- P[r2][c1-1]</text>
  <text x="550" y="265" font-family="Segoe UI, Arial" font-size="13" fill="#aaa">= -(C + D)</text>
  
  <text x="430" y="295" font-family="Consolas" font-size="14" fill="#bb8fce">+ P[r1-1][c1-1]</text>
  <text x="550" y="295" font-family="Segoe UI, Arial" font-size="13" fill="#aaa">= +D (added back)</text>
  
  <line x1="430" y1="305" x2="750" y2="305" stroke="#4a5568" stroke-width="1"/>
  
  <text x="430" y="320" font-family="Consolas" font-size="14" font-weight="bold" fill="#27ae60">= A</text>
  <text x="480" y="320" font-family="Segoe UI, Arial" font-size="13" fill="#2ecc71">✓ Target region!</text>
  
  <!-- Build Formula -->
  <rect x="80" y="340" width="280" height="70" rx="10" fill="#0d1b2a" stroke="#f39c12" stroke-width="2"/>
  <text x="220" y="365" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#f39c12" text-anchor="middle">Build Formula:</text>
  <text x="220" y="395" font-family="Consolas" font-size="12" fill="#ffffff" text-anchor="middle">P[i][j] = P[i-1][j] + P[i][j-1]</text>
  <text x="220" y="405" font-family="Consolas" font-size="11" fill="#ffffff" text-anchor="middle">           - P[i-1][j-1] + A[i][j]</text>
  
  <!-- Query Formula -->
  <rect x="380" y="340" width="440" height="70" rx="10" fill="#0d1b2a" stroke="#27ae60" stroke-width="2"/>
  <text x="600" y="365" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#27ae60" text-anchor="middle">Query Formula (r1,c1 to r2,c2):</text>
  <text x="600" y="395" font-family="Consolas" font-size="12" fill="#ffffff" text-anchor="middle">sum = P[r2][c2] - P[r1-1][c2] - P[r2][c1-1] + P[r1-1][c1-1]</text>
  
  <!-- Complexity -->
  <rect x="80" y="430" width="690" height="55" rx="10" fill="#0d1b2a" stroke="#9b59b6" stroke-width="2"/>
  <text x="425" y="455" font-family="Segoe UI, Arial" font-size="14" fill="#ffffff" text-anchor="middle">
    <tspan font-weight="bold" fill="#bb8fce">Complexity:</tspan>
    <tspan fill="#ffffff"> Build: O(m×n) | Query: O(1) | Space: O(m×n)</tspan>
  </text>
  <text x="425" y="475" font-family="Segoe UI, Arial" font-size="12" fill="#88ccff" text-anchor="middle">Perfect for multiple submatrix sum queries!</text>
</svg>

