<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <defs>
    <linearGradient id="bgGrad7" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="queryCell" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e67e22;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d35400;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="resultCell" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#27ae60;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1e8449;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="normalCell" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4a90a4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2c5f72;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="450" fill="url(#bgGrad7)"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Segoe UI, Arial" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">Range Sum Query in O(1)</text>
  <text x="400" y="65" font-family="Segoe UI, Arial" font-size="14" fill="#88ccff" text-anchor="middle">Query: sum(L, R) = P[R+1] - P[L]</text>
  
  <!-- Original Array -->
  <text x="60" y="105" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#3498db">Original Array A:</text>
  <g transform="translate(60, 115)">
    <rect x="0" y="0" width="65" height="45" rx="5" fill="url(#normalCell)" stroke="#5dade2" stroke-width="2"/>
    <text x="32" y="28" font-family="Consolas" font-size="18" fill="#fff" text-anchor="middle">3</text>
    <text x="32" y="58" font-family="Consolas" font-size="10" fill="#aaa" text-anchor="middle">idx 0</text>
    
    <rect x="75" y="0" width="65" height="45" rx="5" fill="url(#queryCell)" stroke="#f39c12" stroke-width="3"/>
    <text x="107" y="28" font-family="Consolas" font-size="18" fill="#fff" text-anchor="middle">1</text>
    <text x="107" y="58" font-family="Consolas" font-size="10" fill="#f39c12" text-anchor="middle">L=1</text>
    
    <rect x="150" y="0" width="65" height="45" rx="5" fill="url(#queryCell)" stroke="#f39c12" stroke-width="3"/>
    <text x="182" y="28" font-family="Consolas" font-size="18" fill="#fff" text-anchor="middle">-2</text>
    <text x="182" y="58" font-family="Consolas" font-size="10" fill="#f39c12" text-anchor="middle">idx 2</text>
    
    <rect x="225" y="0" width="65" height="45" rx="5" fill="url(#queryCell)" stroke="#f39c12" stroke-width="3"/>
    <text x="257" y="28" font-family="Consolas" font-size="18" fill="#fff" text-anchor="middle">5</text>
    <text x="257" y="58" font-family="Consolas" font-size="10" fill="#f39c12" text-anchor="middle">R=3</text>
    
    <rect x="300" y="0" width="65" height="45" rx="5" fill="url(#normalCell)" stroke="#5dade2" stroke-width="2"/>
    <text x="332" y="28" font-family="Consolas" font-size="18" fill="#fff" text-anchor="middle">-1</text>
    <text x="332" y="58" font-family="Consolas" font-size="10" fill="#aaa" text-anchor="middle">idx 4</text>
  </g>
  
  <!-- Query Range Bracket -->
  <path d="M 135 175 L 135 190 L 347 190 L 347 175" stroke="#f39c12" stroke-width="3" fill="none"/>
  <text x="240" y="210" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#f39c12" text-anchor="middle">Query Range [1, 3]</text>
  
  <!-- Prefix Array -->
  <text x="60" y="245" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#27ae60">Prefix Sum P:</text>
  <g transform="translate(60, 255)">
    <rect x="0" y="0" width="55" height="45" rx="5" fill="url(#normalCell)" stroke="#5dade2" stroke-width="2"/>
    <text x="27" y="28" font-family="Consolas" font-size="16" fill="#fff" text-anchor="middle">0</text>
    <text x="27" y="58" font-family="Consolas" font-size="10" fill="#aaa" text-anchor="middle">P[0]</text>
    
    <rect x="65" y="0" width="55" height="45" rx="5" fill="url(#resultCell)" stroke="#2ecc71" stroke-width="3"/>
    <text x="92" y="28" font-family="Consolas" font-size="16" fill="#fff" text-anchor="middle">3</text>
    <text x="92" y="58" font-family="Consolas" font-size="10" fill="#2ecc71" text-anchor="middle">P[L]=P[1]</text>
    
    <rect x="130" y="0" width="55" height="45" rx="5" fill="url(#normalCell)" stroke="#5dade2" stroke-width="2"/>
    <text x="157" y="28" font-family="Consolas" font-size="16" fill="#fff" text-anchor="middle">4</text>
    <text x="157" y="58" font-family="Consolas" font-size="10" fill="#aaa" text-anchor="middle">P[2]</text>
    
    <rect x="195" y="0" width="55" height="45" rx="5" fill="url(#normalCell)" stroke="#5dade2" stroke-width="2"/>
    <text x="222" y="28" font-family="Consolas" font-size="16" fill="#fff" text-anchor="middle">2</text>
    <text x="222" y="58" font-family="Consolas" font-size="10" fill="#aaa" text-anchor="middle">P[3]</text>
    
    <rect x="260" y="0" width="55" height="45" rx="5" fill="url(#resultCell)" stroke="#2ecc71" stroke-width="3"/>
    <text x="287" y="28" font-family="Consolas" font-size="16" fill="#fff" text-anchor="middle">7</text>
    <text x="287" y="58" font-family="Consolas" font-size="10" fill="#2ecc71" text-anchor="middle">P[R+1]=P[4]</text>
    
    <rect x="325" y="0" width="55" height="45" rx="5" fill="url(#normalCell)" stroke="#5dade2" stroke-width="2"/>
    <text x="352" y="28" font-family="Consolas" font-size="16" fill="#fff" text-anchor="middle">6</text>
    <text x="352" y="58" font-family="Consolas" font-size="10" fill="#aaa" text-anchor="middle">P[5]</text>
  </g>
  
  <!-- Calculation Box -->
  <rect x="440" y="115" width="320" height="200" rx="10" fill="#0d1b2a" stroke="#4a90a4" stroke-width="2"/>
  <text x="600" y="148" font-family="Segoe UI, Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">Calculation:</text>
  
  <text x="470" y="180" font-family="Segoe UI, Arial" font-size="14" fill="#f39c12">Query: sum(1, 3)</text>
  
  <text x="470" y="210" font-family="Consolas" font-size="14" fill="#ffffff">= P[R+1] - P[L]</text>
  <text x="470" y="235" font-family="Consolas" font-size="14" fill="#ffffff">= P[4] - P[1]</text>
  <text x="470" y="260" font-family="Consolas" font-size="14" fill="#2ecc71">= 7 - 3</text>
  <text x="470" y="290" font-family="Consolas" font-size="18" font-weight="bold" fill="#27ae60">= 4 ✓</text>
  
  <!-- Verification -->
  <rect x="60" y="345" width="350" height="90" rx="10" fill="#0d1b2a" stroke="#9b59b6" stroke-width="2"/>
  <text x="235" y="375" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#bb8fce" text-anchor="middle">Verification (Direct Sum):</text>
  <text x="235" y="405" font-family="Consolas" font-size="14" fill="#ffffff" text-anchor="middle">A[1] + A[2] + A[3] = 1 + (-2) + 5 = 4 ✓</text>
  
  <!-- Complexity Box -->
  <rect x="430" y="345" width="330" height="90" rx="10" fill="#0d1b2a" stroke="#27ae60" stroke-width="2"/>
  <text x="595" y="375" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#2ecc71" text-anchor="middle">Time Complexity:</text>
  <text x="595" y="405" font-family="Segoe UI, Arial" font-size="13" fill="#ffffff" text-anchor="middle">Preprocess: O(n) | Query: O(1)</text>
  <text x="595" y="425" font-family="Segoe UI, Arial" font-size="12" fill="#88ccff" text-anchor="middle">vs Direct Sum: O(n) per query</text>
</svg>
