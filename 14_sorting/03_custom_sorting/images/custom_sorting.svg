<svg viewBox="0 0 950 750" xmlns="http://www.w3.org/2000/svg">
  <rect width="950" height="750" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="40" text-anchor="middle" fill="#ffffff" font-size="26" font-weight="bold" font-family="Courier New, monospace">Custom Sorting Techniques</text>
  <text x="475" y="65" text-anchor="middle" fill="#888888" font-size="14" font-family="Courier New, monospace">Define your own ordering with comparators and keys</text>
  
  <!-- ========== CUSTOM COMPARATOR SECTION ========== -->
  <text x="240" y="105" text-anchor="middle" fill="#e94560" font-size="14" font-weight="bold" font-family="Courier New, monospace">CUSTOM COMPARATOR</text>
  <text x="240" y="120" text-anchor="middle" fill="#888888" font-size="10" font-family="Courier New, monospace">Define ordering relation a ≺ b</text>
  
  <!-- Comparator function visualization -->
  <rect x="40" y="135" width="400" height="90" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="60" y="158" fill="#60a5fa" font-size="12" font-family="Courier New, monospace">def compare(a, b):</text>
  <text x="80" y="178" fill="#ffffff" font-size="11" font-family="Courier New, monospace">if a ≺ b:  return -1  </text>
  <text x="260" y="178" fill="#4ade80" font-size="10" font-family="Courier New, monospace"># a comes before b</text>
  <text x="80" y="196" fill="#ffffff" font-size="11" font-family="Courier New, monospace">if a = b:  return  0  </text>
  <text x="260" y="196" fill="#888888" font-size="10" font-family="Courier New, monospace"># equal</text>
  <text x="80" y="214" fill="#ffffff" font-size="11" font-family="Courier New, monospace">if a ≻ b:  return  1  </text>
  <text x="260" y="214" fill="#ef4444" font-size="10" font-family="Courier New, monospace"># a comes after b</text>
  
  <!-- Transitivity requirement -->
  <rect x="40" y="235" width="400" height="45" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="5"/>
  <text x="50" y="255" fill="#f97316" font-size="11" font-weight="bold" font-family="Courier New, monospace">⚠️ TRANSITIVITY REQUIRED:</text>
  <text x="50" y="272" fill="#ffffff" font-size="11" font-family="Courier New, monospace">a ≺ b ∧ b ≺ c  ⟹  a ≺ c</text>
  <text x="260" y="272" fill="#888888" font-size="10" font-family="Courier New, monospace">(violation = undefined behavior)</text>
  
  <!-- ========== LARGEST NUMBER PROBLEM ========== -->
  <text x="700" y="105" text-anchor="middle" fill="#e94560" font-size="14" font-weight="bold" font-family="Courier New, monospace">LARGEST NUMBER (LC 179)</text>
  <text x="700" y="120" text-anchor="middle" fill="#888888" font-size="10" font-family="Courier New, monospace">Form largest number from array</text>
  
  <!-- Input -->
  <text x="520" y="145" fill="#888888" font-size="11" font-family="Courier New, monospace">input:</text>
  <rect x="520" y="155" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="542" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold" font-family="Courier New, monospace">3</text>
  <rect x="570" y="155" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="592" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold" font-family="Courier New, monospace">30</text>
  <rect x="620" y="155" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="642" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold" font-family="Courier New, monospace">34</text>
  <rect x="670" y="155" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="692" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold" font-family="Courier New, monospace">5</text>
  <rect x="720" y="155" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="742" y="175" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold" font-family="Courier New, monospace">9</text>
  
  <!-- Comparison logic -->
  <text x="520" y="210" fill="#f97316" font-size="11" font-weight="bold" font-family="Courier New, monospace">Key Insight: Compare "ab" vs "ba"</text>
  
  <!-- Example comparisons -->
  <rect x="520" y="220" width="180" height="60" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="5"/>
  <text x="530" y="240" fill="#ffffff" font-size="11" font-family="Courier New, monospace">"3" vs "30":</text>
  <text x="530" y="257" fill="#4ade80" font-size="11" font-family="Courier New, monospace">"330" &gt; "303"</text>
  <text x="640" y="257" fill="#4ade80" font-size="10" font-family="Courier New, monospace">→ 3 first</text>
  <text x="530" y="274" fill="#888888" font-size="10" font-family="Courier New, monospace">3 ≺ 30 in our ordering</text>
  
  <rect x="710" y="220" width="180" height="60" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="5"/>
  <text x="720" y="240" fill="#ffffff" font-size="11" font-family="Courier New, monospace">"34" vs "3":</text>
  <text x="720" y="257" fill="#4ade80" font-size="11" font-family="Courier New, monospace">"343" &gt; "334"</text>
  <text x="830" y="257" fill="#4ade80" font-size="10" font-family="Courier New, monospace">→ 34 first</text>
  <text x="720" y="274" fill="#888888" font-size="10" font-family="Courier New, monospace">34 ≺ 3 in our ordering</text>
  
  <!-- Result -->
  <text x="520" y="305" fill="#4ade80" font-size="11" font-weight="bold" font-family="Courier New, monospace">Sorted order: [9, 5, 34, 3, 30]</text>
  <rect x="520" y="315" width="350" height="35" fill="#0f2f1f" stroke="#4ade80" stroke-width="3" rx="5"/>
  <text x="695" y="338" text-anchor="middle" fill="#ffffff" font-size="16" font-weight="bold" font-family="Courier New, monospace">Result: "9534330"</text>
  
  <!-- ========== MULTI-KEY SORTING ========== -->
  <text x="240" y="320" text-anchor="middle" fill="#e94560" font-size="14" font-weight="bold" font-family="Courier New, monospace">MULTI-KEY SORTING</text>
  <text x="240" y="335" text-anchor="middle" fill="#888888" font-size="10" font-family="Courier New, monospace">Sort by multiple criteria using tuple keys</text>
  
  <!-- Example: Sort by bits, then value -->
  <rect x="40" y="350" width="400" height="100" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="50" y="370" fill="#60a5fa" font-size="11" font-weight="bold" font-family="Courier New, monospace"># Sort by bit count, then value (LC 1356)</text>
  <text x="50" y="390" fill="#ffffff" font-size="11" font-family="Courier New, monospace">key = lambda x: (bin(x).count('1'), x)</text>
  <text x="50" y="415" fill="#888888" font-size="10" font-family="Courier New, monospace">input:  [0, 1, 2, 3, 4, 5, 6, 7, 8]</text>
  <text x="50" y="435" fill="#4ade80" font-size="10" font-family="Courier New, monospace">output: [0, 1, 2, 4, 8, 3, 5, 6, 7]</text>
  <text x="290" y="435" fill="#888888" font-size="9" font-family="Courier New, monospace">← grouped by bit count</text>
  
  <!-- Tuple key visualization -->
  <text x="40" y="470" fill="#f97316" font-size="11" font-weight="bold" font-family="Courier New, monospace">Tuple comparison (lexicographic):</text>
  
  <rect x="40" y="480" width="80" height="50" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="3"/>
  <text x="80" y="500" text-anchor="middle" fill="#a78bfa" font-size="11" font-weight="bold" font-family="Courier New, monospace">3</text>
  <text x="80" y="518" text-anchor="middle" fill="#ffffff" font-size="10" font-family="Courier New, monospace">(2, 3)</text>
  <text x="80" y="543" text-anchor="middle" fill="#888888" font-size="9" font-family="Courier New, monospace">2 bits</text>
  
  <rect x="130" y="480" width="80" height="50" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="3"/>
  <text x="170" y="500" text-anchor="middle" fill="#a78bfa" font-size="11" font-weight="bold" font-family="Courier New, monospace">5</text>
  <text x="170" y="518" text-anchor="middle" fill="#ffffff" font-size="10" font-family="Courier New, monospace">(2, 5)</text>
  <text x="170" y="543" text-anchor="middle" fill="#888888" font-size="9" font-family="Courier New, monospace">2 bits</text>
  
  <rect x="220" y="480" width="80" height="50" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="3"/>
  <text x="260" y="500" text-anchor="middle" fill="#a78bfa" font-size="11" font-weight="bold" font-family="Courier New, monospace">6</text>
  <text x="260" y="518" text-anchor="middle" fill="#ffffff" font-size="10" font-family="Courier New, monospace">(2, 6)</text>
  <text x="260" y="543" text-anchor="middle" fill="#888888" font-size="9" font-family="Courier New, monospace">2 bits</text>
  
  <rect x="310" y="480" width="80" height="50" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="3"/>
  <text x="350" y="500" text-anchor="middle" fill="#f97316" font-size="11" font-weight="bold" font-family="Courier New, monospace">7</text>
  <text x="350" y="518" text-anchor="middle" fill="#ffffff" font-size="10" font-family="Courier New, monospace">(3, 7)</text>
  <text x="350" y="543" text-anchor="middle" fill="#888888" font-size="9" font-family="Courier New, monospace">3 bits</text>
  
  <!-- ========== MERGE INTERVALS ========== -->
  <text x="700" y="385" text-anchor="middle" fill="#e94560" font-size="14" font-weight="bold" font-family="Courier New, monospace">MERGE INTERVALS (LC 56)</text>
  <text x="700" y="400" text-anchor="middle" fill="#888888" font-size="10" font-family="Courier New, monospace">Sort by start, then merge overlapping</text>
  
  <!-- Input intervals -->
  <text x="520" y="420" fill="#888888" font-size="10" font-family="Courier New, monospace">input: [[1,3], [2,6], [8,10], [15,18]]</text>
  
  <!-- Visual representation -->
  <text x="520" y="445" fill="#888888" font-size="9" font-family="Courier New, monospace">Timeline:</text>
  <line x1="540" y1="465" x2="890" y2="465" stroke="#3b82f6" stroke-width="1"/>
  
  <!-- Scale markers -->
  <text x="540" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">0</text>
  <text x="580" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">2</text>
  <text x="620" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">4</text>
  <text x="660" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">6</text>
  <text x="700" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">8</text>
  <text x="740" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">10</text>
  <text x="820" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">15</text>
  <text x="870" y="480" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">18</text>
  
  <!-- Interval [1,3] -->
  <rect x="560" y="450" width="40" height="12" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="580" y="445" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">[1,3]</text>
  
  <!-- Interval [2,6] overlapping -->
  <rect x="580" y="455" width="80" height="8" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  
  <!-- Interval [8,10] -->
  <rect x="700" y="450" width="40" height="12" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="720" y="445" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">[8,10]</text>
  
  <!-- Interval [15,18] -->
  <rect x="820" y="450" width="50" height="12" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="845" y="445" text-anchor="middle" fill="#888888" font-size="8" font-family="Courier New, monospace">[15,18]</text>
  
  <!-- Merged result -->
  <text x="520" y="505" fill="#4ade80" font-size="10" font-weight="bold" font-family="Courier New, monospace">After merge: [[1,6], [8,10], [15,18]]</text>
  
  <!-- Merged visualization -->
  <line x1="540" y1="525" x2="890" y2="525" stroke="#4ade80" stroke-width="1"/>
  <rect x="560" y="515" width="100" height="12" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="610" y="510" text-anchor="middle" fill="#4ade80" font-size="8" font-family="Courier New, monospace">[1,6] merged!</text>
  <rect x="700" y="515" width="40" height="12" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <rect x="820" y="515" width="50" height="12" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  
  <!-- ========== CUSTOM SORT STRING ========== -->
  <text x="240" y="580" text-anchor="middle" fill="#e94560" font-size="14" font-weight="bold" font-family="Courier New, monospace">RELATIVE SORT / CUSTOM ORDER</text>
  
  <rect x="40" y="595" width="400" height="85" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="50" y="615" fill="#60a5fa" font-size="11" font-weight="bold" font-family="Courier New, monospace"># Custom Sort String (LC 791)</text>
  <text x="50" y="635" fill="#ffffff" font-size="10" font-family="Courier New, monospace">order = "cba",  s = "abcd"</text>
  <text x="50" y="655" fill="#888888" font-size="10" font-family="Courier New, monospace">order_map = {'c':0, 'b':1, 'a':2}</text>
  <text x="50" y="670" fill="#4ade80" font-size="10" font-family="Courier New, monospace">sorted(s, key=λc: order_map.get(c, 26))</text>
  <text x="320" y="670" fill="#4ade80" font-size="10" font-family="Courier New, monospace">→ "cbad"</text>
  
  <!-- ========== PATTERNS TABLE ========== -->
  <text x="700" y="580" text-anchor="middle" fill="#e94560" font-size="14" font-weight="bold" font-family="Courier New, monospace">CUSTOM SORTING PATTERNS</text>
  
  <!-- Pattern boxes -->
  <rect x="520" y="595" width="180" height="40" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="5"/>
  <text x="610" y="612" text-anchor="middle" fill="#4ade80" font-size="10" font-weight="bold" font-family="Courier New, monospace">Tuple Key</text>
  <text x="610" y="628" text-anchor="middle" fill="#ffffff" font-size="9" font-family="Courier New, monospace">sorted(arr, key=λx: (k1, k2))</text>
  
  <rect x="710" y="595" width="180" height="40" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="5"/>
  <text x="800" y="612" text-anchor="middle" fill="#f97316" font-size="10" font-weight="bold" font-family="Courier New, monospace">cmp_to_key</text>
  <text x="800" y="628" text-anchor="middle" fill="#ffffff" font-size="9" font-family="Courier New, monospace">For string concatenation</text>
  
  <rect x="520" y="645" width="180" height="40" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="5"/>
  <text x="610" y="662" text-anchor="middle" fill="#a78bfa" font-size="10" font-weight="bold" font-family="Courier New, monospace">Index Mapping</text>
  <text x="610" y="678" text-anchor="middle" fill="#ffffff" font-size="9" font-family="Courier New, monospace">Relative sort order</text>
  
  <rect x="710" y="645" width="180" height="40" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="800" y="662" text-anchor="middle" fill="#3b82f6" font-size="10" font-weight="bold" font-family="Courier New, monospace">Sort + Process</text>
  <text x="800" y="678" text-anchor="middle" fill="#ffffff" font-size="9" font-family="Courier New, monospace">Merge intervals, H-Index</text>
  
  <!-- ========== COMPLEXITY FOOTER ========== -->
  <rect x="40" y="700" width="870" height="35" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="5"/>
  <text x="475" y="720" text-anchor="middle" fill="#60a5fa" font-size="12" font-family="Courier New, monospace">All custom sorts: O(n log n) time | Key functions must be consistent and transitive</text>
  <text x="475" y="733" text-anchor="middle" fill="#888888" font-size="10" font-family="Courier New, monospace">Python: sorted() with key= or functools.cmp_to_key() | Java: Comparator interface</text>
</svg>

