<svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="600" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">ðŸ”„ Partition Algorithm (Lomuto)</text>
  <text x="450" y="58" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">Core building block of Quick Sort/Select</text>
  
  <!-- Initial State -->
  <text x="50" y="100" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">INITIAL: pivot = arr[right] = 4</text>
  
  <g transform="translate(150, 110)">
    <rect x="0" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="30" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
    
    <rect x="60" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="90" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">7</text>
    
    <rect x="120" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="150" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
    
    <rect x="180" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="210" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
    
    <rect x="240" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="270" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
    
    <rect x="300" y="0" width="60" height="45" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
    <text x="330" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#f97316" text-anchor="middle">4</text>
  </g>
  
  <!-- Pointers -->
  <text x="180" y="175" font-family="Courier New, monospace" font-size="12" fill="#4ade80" text-anchor="middle">store=0</text>
  <text x="180" y="190" font-family="Courier New, monospace" font-size="12" fill="#a78bfa" text-anchor="middle">i=0</text>
  <text x="480" y="175" font-family="Courier New, monospace" font-size="12" fill="#f97316" text-anchor="middle">pivot</text>
  
  <!-- Step 1: i=0, arr[0]=3 < 4, swap -->
  <text x="50" y="220" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">STEP 1: i=0, arr[0]=3 &lt; 4 â†’ swap(0,0), store++</text>
  
  <g transform="translate(150, 230)">
    <rect x="0" y="0" width="60" height="45" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="30" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80" text-anchor="middle">3</text>
    
    <rect x="60" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="90" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">7</text>
    
    <rect x="120" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="150" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
    
    <rect x="180" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="210" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
    
    <rect x="240" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="270" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
    
    <rect x="300" y="0" width="60" height="45" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
    <text x="330" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#f97316" text-anchor="middle">4</text>
  </g>
  <text x="240" y="295" font-family="Courier New, monospace" font-size="12" fill="#4ade80" text-anchor="middle">store=1</text>
  
  <!-- Step 2: i=1, arr[1]=7 >= 4, skip -->
  <text x="50" y="320" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">STEP 2: i=1, arr[1]=7 â‰¥ 4 â†’ skip</text>
  
  <!-- Step 3: i=2, arr[2]=2 < 4, swap(1,2) -->
  <text x="50" y="360" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">STEP 3: i=2, arr[2]=2 &lt; 4 â†’ swap(1,2), store++</text>
  
  <g transform="translate(150, 370)">
    <rect x="0" y="0" width="60" height="45" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="30" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80" text-anchor="middle">3</text>
    
    <rect x="60" y="0" width="60" height="45" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="90" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80" text-anchor="middle">2</text>
    
    <rect x="120" y="0" width="60" height="45" fill="#1f0f0f" stroke="#ef4444" stroke-width="2"/>
    <text x="150" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ef4444" text-anchor="middle">7</text>
    
    <rect x="180" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="210" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
    
    <rect x="240" y="0" width="60" height="45" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="270" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
    
    <rect x="300" y="0" width="60" height="45" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
    <text x="330" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#f97316" text-anchor="middle">4</text>
  </g>
  <text x="300" y="435" font-family="Courier New, monospace" font-size="12" fill="#4ade80" text-anchor="middle">store=2</text>
  
  <!-- Continue process indicator -->
  <text x="600" y="390" font-family="Courier New, monospace" font-size="12" fill="#888888">... continue for i=3,4 ...</text>
  
  <!-- Final State -->
  <text x="50" y="480" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">FINAL: swap(store, right) â†’ pivot in correct position</text>
  
  <g transform="translate(150, 490)">
    <rect x="0" y="0" width="60" height="45" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="30" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80" text-anchor="middle">3</text>
    
    <rect x="60" y="0" width="60" height="45" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="90" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80" text-anchor="middle">2</text>
    
    <rect x="120" y="0" width="60" height="45" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="150" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80" text-anchor="middle">1</text>
    
    <rect x="180" y="0" width="60" height="45" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
    <text x="210" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#f97316" text-anchor="middle">4</text>
    
    <rect x="240" y="0" width="60" height="45" fill="#1f0f0f" stroke="#ef4444" stroke-width="2"/>
    <text x="270" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ef4444" text-anchor="middle">5</text>
    
    <rect x="300" y="0" width="60" height="45" fill="#1f0f0f" stroke="#ef4444" stroke-width="2"/>
    <text x="330" y="28" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ef4444" text-anchor="middle">7</text>
  </g>
  
  <!-- Legend -->
  <text x="210" y="555" font-family="Courier New, monospace" font-size="11" fill="#4ade80" text-anchor="middle">&lt; pivot</text>
  <text x="360" y="555" font-family="Courier New, monospace" font-size="11" fill="#f97316" text-anchor="middle">pivot_idx=3</text>
  <text x="450" y="555" font-family="Courier New, monospace" font-size="11" fill="#ef4444" text-anchor="middle">â‰¥ pivot</text>
  
  <!-- Invariant box -->
  <rect x="550" y="480" width="300" height="100" rx="8" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
  <text x="700" y="510" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa" text-anchor="middle">PARTITION INVARIANT</text>
  <text x="700" y="535" font-family="Courier New, monospace" font-size="12" fill="#4ade80" text-anchor="middle">[0..store-1] &lt; pivot</text>
  <text x="700" y="555" font-family="Courier New, monospace" font-size="12" fill="#f97316" text-anchor="middle">[store] = pivot</text>
  <text x="700" y="575" font-family="Courier New, monospace" font-size="12" fill="#ef4444" text-anchor="middle">[store+1..n-1] â‰¥ pivot</text>
</svg>

