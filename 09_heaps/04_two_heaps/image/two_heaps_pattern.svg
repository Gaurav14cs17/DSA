<svg viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg">
  <rect width="1000" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="500" y="40" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff" text-anchor="middle">TWO HEAPS PATTERN</text>
  <text x="500" y="65" font-family="Courier New, monospace" font-size="16" fill="#888888" text-anchor="middle">Dynamic Median Finding: Max-Heap (left) + Min-Heap (right)</text>
  
  <!-- Section: Visual representation of two heaps -->
  <text x="500" y="110" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560" text-anchor="middle">MEDIAN FROM DATA STREAM: [5, 2, 8, 3, 1, 9, 4]</text>
  
  <!-- Left heap (Max-Heap) -->
  <rect x="40" y="130" width="400" height="280" fill="none" stroke="#f97316" stroke-width="2" rx="5"/>
  <text x="240" y="155" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#f97316" text-anchor="middle">MAX-HEAP (Smaller Half)</text>
  
  <!-- Max-heap tree -->
  <circle cx="240" cy="220" r="30" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
  <text x="240" y="227" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
  <text x="240" y="195" font-family="Courier New, monospace" font-size="10" fill="#f97316">MAX</text>
  
  <line x1="215" y1="243" x2="155" y2="283" stroke="#f97316" stroke-width="2"/>
  <line x1="265" y1="243" x2="325" y2="283" stroke="#f97316" stroke-width="2"/>
  
  <circle cx="140" cy="305" r="28" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="140" y="312" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">3</text>
  
  <circle cx="340" cy="305" r="28" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="340" y="312" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">2</text>
  
  <line x1="120" y1="328" x2="85" y2="363" stroke="#f97316" stroke-width="2"/>
  
  <circle cx="70" cy="385" r="28" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
  <text x="70" y="392" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">1</text>
  
  <text x="240" y="380" font-family="Courier New, monospace" font-size="12" fill="#888888" text-anchor="middle">Elements: [1, 2, 3, 4]</text>
  <text x="240" y="400" font-family="Courier New, monospace" font-size="12" fill="#f97316" text-anchor="middle">Size: 4</text>
  
  <!-- Right heap (Min-Heap) -->
  <rect x="560" y="130" width="400" height="280" fill="none" stroke="#4ade80" stroke-width="2" rx="5"/>
  <text x="760" y="155" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80" text-anchor="middle">MIN-HEAP (Larger Half)</text>
  
  <!-- Min-heap tree -->
  <circle cx="760" cy="220" r="30" fill="#0f2f1f" stroke="#4ade80" stroke-width="3"/>
  <text x="760" y="227" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">5</text>
  <text x="760" y="195" font-family="Courier New, monospace" font-size="10" fill="#4ade80">MIN</text>
  
  <line x1="735" y1="243" x2="675" y2="283" stroke="#4ade80" stroke-width="2"/>
  <line x1="785" y1="243" x2="845" y2="283" stroke="#4ade80" stroke-width="2"/>
  
  <circle cx="660" cy="305" r="28" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="660" y="312" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">8</text>
  
  <circle cx="860" cy="305" r="28" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="860" y="312" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">9</text>
  
  <text x="760" y="380" font-family="Courier New, monospace" font-size="12" fill="#888888" text-anchor="middle">Elements: [5, 8, 9]</text>
  <text x="760" y="400" font-family="Courier New, monospace" font-size="12" fill="#4ade80" text-anchor="middle">Size: 3</text>
  
  <!-- Median calculation -->
  <rect x="450" y="200" width="100" height="80" fill="#2d1f3d" stroke="#a78bfa" stroke-width="3" rx="5"/>
  <text x="500" y="230" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#a78bfa" text-anchor="middle">MEDIAN</text>
  <text x="500" y="255" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">4</text>
  <text x="500" y="275" font-family="Courier New, monospace" font-size="10" fill="#888888" text-anchor="middle">max(left)</text>
  
  <!-- Arrows connecting heaps to median -->
  <path d="M280 220 L450 240" fill="none" stroke="#f97316" stroke-width="2"/>
  <path d="M720 220 L550 240" fill="none" stroke="#4ade80" stroke-width="2"/>
  
  <!-- Invariants box -->
  <rect x="40" y="425" width="440" height="120" fill="none" stroke="#a78bfa" stroke-width="1" rx="5"/>
  <text x="260" y="450" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa" text-anchor="middle">INVARIANTS</text>
  
  <text x="60" y="480" font-family="Courier New, monospace" font-size="12" fill="#ffffff">1. |left| = |right| OR |left| = |right| + 1</text>
  <text x="60" y="505" font-family="Courier New, monospace" font-size="12" fill="#ffffff">2. max(left) ≤ min(right)</text>
  <text x="60" y="530" font-family="Courier New, monospace" font-size="12" fill="#888888">→ All elements in left ≤ all elements in right</text>
  
  <!-- Median formula box -->
  <rect x="520" y="425" width="440" height="120" fill="none" stroke="#4ade80" stroke-width="1" rx="5"/>
  <text x="740" y="450" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80" text-anchor="middle">MEDIAN FORMULA</text>
  
  <text x="540" y="480" font-family="Courier New, monospace" font-size="12" fill="#ffffff">If |left| > |right|:</text>
  <text x="700" y="480" font-family="Courier New, monospace" font-size="12" fill="#f97316">median = max(left)</text>
  
  <text x="540" y="510" font-family="Courier New, monospace" font-size="12" fill="#ffffff">If |left| = |right|:</text>
  <text x="700" y="510" font-family="Courier New, monospace" font-size="12" fill="#a78bfa">median = (max(left) + min(right)) / 2</text>
  
  <!-- Complexity -->
  <text x="740" y="538" font-family="Courier New, monospace" font-size="11" fill="#60a5fa">addNum: O(log n) | findMedian: O(1)</text>
  
  <!-- Algorithm steps -->
  <rect x="40" y="560" width="920" height="115" fill="none" stroke="#3b82f6" stroke-width="1" rx="5"/>
  <text x="500" y="585" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#3b82f6" text-anchor="middle">ADD NUMBER ALGORITHM</text>
  
  <text x="60" y="615" font-family="Courier New, monospace" font-size="12" fill="#4ade80">1. Push to left (max-heap)</text>
  <text x="60" y="640" font-family="Courier New, monospace" font-size="12" fill="#ffffff">2. If max(left) > min(right): move max(left) to right</text>
  <text x="60" y="665" font-family="Courier New, monospace" font-size="12" fill="#ffffff">3. Balance sizes: if |left| > |right|+1: move to right, vice versa</text>
  
  <!-- Code snippet -->
  <text x="550" y="615" font-family="Courier New, monospace" font-size="11" fill="#f97316">heappush(left, -num)</text>
  <text x="550" y="635" font-family="Courier New, monospace" font-size="11" fill="#888888">if right and -left[0] > right[0]:</text>
  <text x="570" y="655" font-family="Courier New, monospace" font-size="11" fill="#888888">heappush(right, -heappop(left))</text>
</svg>

