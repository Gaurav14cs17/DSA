<svg viewBox="0 0 950 700" xmlns="http://www.w3.org/2000/svg">
  <rect width="950" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="40" text-anchor="middle" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff">Subarray Sum = K using Prefix Sum</text>
  <text x="475" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="16" fill="#888888">P[j] - P[i-1] = k → Count subarrays with sum k</text>
  
  <!-- Input -->
  <text x="50" y="105" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">INPUT</text>
  <text x="50" y="130" font-family="Courier New, monospace" font-size="13" fill="#888888">nums = [1, 1, 1], k = 2</text>
  
  <!-- Array visualization -->
  <g transform="translate(50, 145)">
    <rect x="0" y="0" width="70" height="55" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="4"/>
    <text x="35" y="35" text-anchor="middle" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#ffffff">1</text>
    <text x="35" y="72" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">i=0</text>
    
    <rect x="85" y="0" width="70" height="55" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="4"/>
    <text x="120" y="35" text-anchor="middle" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#ffffff">1</text>
    <text x="120" y="72" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">i=1</text>
    
    <rect x="170" y="0" width="70" height="55" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="4"/>
    <text x="205" y="35" text-anchor="middle" font-family="Courier New, monospace" font-size="20" font-weight="bold" fill="#ffffff">1</text>
    <text x="205" y="72" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">i=2</text>
  </g>
  
  <!-- Formula Box -->
  <rect x="320" y="105" width="340" height="100" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="8"/>
  <text x="340" y="135" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa">KEY FORMULA</text>
  <text x="340" y="165" font-family="Courier New, monospace" font-size="14" fill="#ffffff">sum(i,j) = P[j] - P[i-1] = k</text>
  <text x="340" y="190" font-family="Courier New, monospace" font-size="14" fill="#4ade80">P[i-1] = P[j] - k</text>
  <text x="340" y="200" font-family="Courier New, monospace" font-size="11" fill="#888888">Count prefixes equal to P[j]-k</text>
  
  <!-- Target Box -->
  <rect x="690" y="105" width="210" height="100" fill="#3d1f0f" stroke="#f97316" stroke-width="2" rx="8"/>
  <text x="710" y="135" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#f97316">TARGET</text>
  <text x="710" y="170" font-family="Courier New, monospace" font-size="24" font-weight="bold" fill="#ffffff">k = 2</text>
  <text x="710" y="195" font-family="Courier New, monospace" font-size="12" fill="#888888">Find subarrays summing to 2</text>
  
  <!-- Prefix Sum Array -->
  <text x="50" y="260" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">PREFIX SUM ARRAY</text>
  
  <g transform="translate(50, 280)">
    <text x="30" y="0" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">empty</text>
    <rect x="0" y="10" width="60" height="50" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="4"/>
    <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#a78bfa">0</text>
    <text x="30" y="75" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">P[0]</text>
    
    <rect x="80" y="10" width="60" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2" rx="4"/>
    <text x="110" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
    <text x="110" y="75" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#888888">P[1]</text>
    
    <rect x="160" y="10" width="60" height="50" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="4"/>
    <text x="190" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80">2</text>
    <text x="190" y="75" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#4ade80">P[2]</text>
    
    <rect x="240" y="10" width="60" height="50" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="4"/>
    <text x="270" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#4ade80">3</text>
    <text x="270" y="75" text-anchor="middle" font-family="Courier New, monospace" font-size="11" fill="#4ade80">P[3]</text>
    
    <!-- Arrows showing relation -->
    <path d="M 30 -25 L 30 5" stroke="#a78bfa" stroke-width="1" stroke-dasharray="4"/>
    <path d="M 110 -25 L 110 5" stroke="#888888" stroke-width="1" stroke-dasharray="4"/>
    <path d="M 190 -25 L 190 5" stroke="#888888" stroke-width="1" stroke-dasharray="4"/>
    <path d="M 270 -25 L 270 5" stroke="#888888" stroke-width="1" stroke-dasharray="4"/>
  </g>
  
  <!-- Algorithm Steps -->
  <text x="400" y="260" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">ALGORITHM EXECUTION</text>
  
  <g transform="translate(400, 280)">
    <text x="0" y="0" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">j</text>
    <text x="30" y="0" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">P[j]</text>
    <text x="80" y="0" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">P[j]-k</text>
    <text x="150" y="0" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">count[P[j]-k]</text>
    <text x="280" y="0" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">result</text>
    <text x="360" y="0" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">prefix_count</text>
    
    <!-- Init -->
    <rect x="-5" y="10" width="500" height="28" fill="#2d1f3d" rx="3"/>
    <text x="0" y="30" font-family="Courier New, monospace" font-size="13" fill="#888888">init</text>
    <text x="360" y="30" font-family="Courier New, monospace" font-size="13" fill="#a78bfa">{0:1}</text>
    
    <!-- j=0 -->
    <rect x="-5" y="42" width="500" height="28" fill="#1e3a5f" rx="3"/>
    <text x="0" y="62" font-family="Courier New, monospace" font-size="13" fill="#ffffff">0</text>
    <text x="30" y="62" font-family="Courier New, monospace" font-size="13" fill="#ffffff">1</text>
    <text x="80" y="62" font-family="Courier New, monospace" font-size="13" fill="#ffffff">1-2=-1</text>
    <text x="150" y="62" font-family="Courier New, monospace" font-size="13" fill="#ef4444">0</text>
    <text x="280" y="62" font-family="Courier New, monospace" font-size="13" fill="#ffffff">0</text>
    <text x="360" y="62" font-family="Courier New, monospace" font-size="13" fill="#888888">{0:1, 1:1}</text>
    
    <!-- j=1 -->
    <rect x="-5" y="74" width="500" height="28" fill="#0f2f1f" rx="3"/>
    <text x="0" y="94" font-family="Courier New, monospace" font-size="13" fill="#ffffff">1</text>
    <text x="30" y="94" font-family="Courier New, monospace" font-size="13" fill="#4ade80">2</text>
    <text x="80" y="94" font-family="Courier New, monospace" font-size="13" fill="#4ade80">2-2=0</text>
    <text x="150" y="94" font-family="Courier New, monospace" font-size="13" fill="#4ade80">1 ✓</text>
    <text x="280" y="94" font-family="Courier New, monospace" font-size="13" fill="#4ade80">1</text>
    <text x="360" y="94" font-family="Courier New, monospace" font-size="13" fill="#888888">{0:1, 1:1, 2:1}</text>
    
    <!-- j=2 -->
    <rect x="-5" y="106" width="500" height="28" fill="#0f2f1f" rx="3"/>
    <text x="0" y="126" font-family="Courier New, monospace" font-size="13" fill="#ffffff">2</text>
    <text x="30" y="126" font-family="Courier New, monospace" font-size="13" fill="#4ade80">3</text>
    <text x="80" y="126" font-family="Courier New, monospace" font-size="13" fill="#4ade80">3-2=1</text>
    <text x="150" y="126" font-family="Courier New, monospace" font-size="13" fill="#4ade80">1 ✓</text>
    <text x="280" y="126" font-family="Courier New, monospace" font-size="13" fill="#4ade80">2</text>
    <text x="360" y="126" font-family="Courier New, monospace" font-size="13" fill="#888888">{0:1, 1:1, 2:1, 3:1}</text>
  </g>
  
  <!-- Visual explanation -->
  <text x="50" y="460" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">FOUND SUBARRAYS WITH SUM = 2</text>
  
  <g transform="translate(50, 480)">
    <!-- Subarray 1: [0,1] -->
    <rect x="0" y="0" width="300" height="70" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="6"/>
    <text x="20" y="25" font-family="Courier New, monospace" font-size="12" fill="#4ade80">Subarray [0..1]</text>
    
    <rect x="20" y="35" width="45" height="30" fill="#4ade80" stroke="#4ade80" stroke-width="1" rx="3"/>
    <text x="42" y="57" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#0f0f23">1</text>
    
    <rect x="75" y="35" width="45" height="30" fill="#4ade80" stroke="#4ade80" stroke-width="1" rx="3"/>
    <text x="97" y="57" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#0f0f23">1</text>
    
    <rect x="130" y="35" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1" rx="3"/>
    <text x="152" y="57" text-anchor="middle" font-family="Courier New, monospace" font-size="14" fill="#888888">1</text>
    
    <text x="200" y="57" font-family="Courier New, monospace" font-size="14" fill="#ffffff">= 1+1 = 2 ✓</text>
    
    <!-- Subarray 2: [1,2] -->
    <rect x="320" y="0" width="300" height="70" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="6"/>
    <text x="340" y="25" font-family="Courier New, monospace" font-size="12" fill="#4ade80">Subarray [1..2]</text>
    
    <rect x="340" y="35" width="45" height="30" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1" rx="3"/>
    <text x="362" y="57" text-anchor="middle" font-family="Courier New, monospace" font-size="14" fill="#888888">1</text>
    
    <rect x="395" y="35" width="45" height="30" fill="#4ade80" stroke="#4ade80" stroke-width="1" rx="3"/>
    <text x="417" y="57" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#0f0f23">1</text>
    
    <rect x="450" y="35" width="45" height="30" fill="#4ade80" stroke="#4ade80" stroke-width="1" rx="3"/>
    <text x="472" y="57" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#0f0f23">1</text>
    
    <text x="520" y="57" font-family="Courier New, monospace" font-size="14" fill="#ffffff">= 1+1 = 2 ✓</text>
  </g>
  
  <!-- Result -->
  <rect x="660" y="480" width="250" height="70" fill="#0f2f1f" stroke="#4ade80" stroke-width="2" rx="8"/>
  <text x="680" y="510" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">RESULT</text>
  <text x="680" y="538" font-family="Courier New, monospace" font-size="18" fill="#ffffff">Count = 2</text>
  
  <!-- Why it works -->
  <rect x="50" y="580" width="860" height="90" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2" rx="8"/>
  <text x="70" y="610" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa">WHY THIS WORKS</text>
  <text x="70" y="640" font-family="Courier New, monospace" font-size="13" fill="#ffffff">At j=1: P[1]=2, need P[i-1]=0 → Found at prefix {0:1} → Subarray from start to j=1</text>
  <text x="70" y="660" font-family="Courier New, monospace" font-size="13" fill="#ffffff">At j=2: P[2]=3, need P[i-1]=1 → Found at prefix {1:1} → Subarray from i=1 to j=2</text>
  
  <text x="750" y="610" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Time: O(n)</text>
  <text x="750" y="630" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Space: O(n)</text>
  <text x="750" y="660" font-family="Courier New, monospace" font-size="11" fill="#888888">LeetCode #560</text>
</svg>
