<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700">
  <rect width="1000" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="500" y="40" text-anchor="middle" font-family="Courier New, monospace" font-size="26" font-weight="bold" fill="#ffffff">Stone Game - Interval DP</text>
  <text x="500" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="16" fill="#888888">LeetCode 486: Predict the Winner | Two players pick from ends</text>
  
  <!-- Problem setup -->
  <text x="50" y="110" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">Problem: piles = [3, 9, 1, 2]</text>
  
  <g transform="translate(50, 130)">
    <!-- Array visualization -->
    <g transform="translate(0, 0)">
      <rect x="0" y="0" width="60" height="50" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="30" y="32" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">3</text>
      <text x="30" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="10" fill="#f97316">i=0</text>
    </g>
    
    <g transform="translate(70, 0)">
      <rect x="0" y="0" width="60" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="30" y="32" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">9</text>
      <text x="30" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="10" fill="#3b82f6">i=1</text>
    </g>
    
    <g transform="translate(140, 0)">
      <rect x="0" y="0" width="60" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="30" y="32" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">1</text>
      <text x="30" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="10" fill="#3b82f6">i=2</text>
    </g>
    
    <g transform="translate(210, 0)">
      <rect x="0" y="0" width="60" height="50" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
      <text x="30" y="32" text-anchor="middle" font-family="Courier New, monospace" font-size="18" font-weight="bold" fill="#ffffff">2</text>
      <text x="30" y="65" text-anchor="middle" font-family="Courier New, monospace" font-size="10" fill="#f97316">i=3</text>
    </g>
    
    <!-- Arrows showing choices -->
    <path d="M30,-15 Q30,-30 -10,-30 L-10,0" fill="none" stroke="#f97316" stroke-width="2"/>
    <polygon points="-10,0 -15,-8 -5,-8" fill="#f97316"/>
    
    <path d="M240,-15 Q240,-30 280,-30 L280,0" fill="none" stroke="#f97316" stroke-width="2"/>
    <polygon points="280,0 275,-8 285,-8" fill="#f97316"/>
    
    <text x="135" y="-25" text-anchor="middle" font-family="Courier New, monospace" font-size="10" fill="#f97316">Pick from either end</text>
  </g>
  
  <!-- DP Definition -->
  <g transform="translate(380, 110)">
    <rect x="0" y="0" width="320" height="100" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="160" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80">DP State Definition</text>
    
    <text x="20" y="50" font-family="Courier New, monospace" font-size="11" fill="#ffffff">dp[i][j] = max score difference</text>
    <text x="20" y="68" font-family="Courier New, monospace" font-size="11" fill="#888888">         (current - opponent)</text>
    <text x="20" y="88" font-family="Courier New, monospace" font-size="11" fill="#888888">         for subarray [i..j]</text>
  </g>
  
  <!-- Recurrence -->
  <g transform="translate(720, 110)">
    <rect x="0" y="0" width="250" height="100" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
    <text x="125" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#a78bfa">Recurrence</text>
    
    <text x="20" y="50" font-family="Courier New, monospace" font-size="10" fill="#ffffff">take_left = p[i] - dp[i+1][j]</text>
    <text x="20" y="70" font-family="Courier New, monospace" font-size="10" fill="#ffffff">take_right = p[j] - dp[i][j-1]</text>
    <text x="20" y="90" font-family="Courier New, monospace" font-size="10" fill="#4ade80">dp[i][j] = max(take_left, take_right)</text>
  </g>
  
  <!-- DP Table -->
  <text x="50" y="250" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">DP Table (filled diagonally)</text>
  
  <g transform="translate(50, 270)">
    <!-- Column headers -->
    <text x="80" y="15" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">j=0</text>
    <text x="160" y="15" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">j=1</text>
    <text x="240" y="15" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">j=2</text>
    <text x="320" y="15" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">j=3</text>
    
    <!-- Row labels -->
    <text x="30" y="60" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">i=0</text>
    <text x="30" y="130" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">i=1</text>
    <text x="30" y="200" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">i=2</text>
    <text x="30" y="270" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#888888">i=3</text>
    
    <!-- Base case diagonal (single elements) -->
    <g transform="translate(50, 30)">
      <rect x="0" y="0" width="60" height="50" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">3</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[0,0]</text>
    </g>
    
    <g transform="translate(130, 100)">
      <rect x="0" y="0" width="60" height="50" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">9</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[1,1]</text>
    </g>
    
    <g transform="translate(210, 170)">
      <rect x="0" y="0" width="60" height="50" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">1</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[2,2]</text>
    </g>
    
    <g transform="translate(290, 240)">
      <rect x="0" y="0" width="60" height="50" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#4ade80">2</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[3,3]</text>
    </g>
    
    <!-- Length 2 diagonal -->
    <g transform="translate(130, 30)">
      <rect x="0" y="0" width="60" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#3b82f6">6</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[0,1]</text>
    </g>
    
    <g transform="translate(210, 100)">
      <rect x="0" y="0" width="60" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#3b82f6">8</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[1,2]</text>
    </g>
    
    <g transform="translate(290, 170)">
      <rect x="0" y="0" width="60" height="50" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#3b82f6">1</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[2,3]</text>
    </g>
    
    <!-- Length 3 diagonal -->
    <g transform="translate(210, 30)">
      <rect x="0" y="0" width="60" height="50" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa">5</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[0,2]</text>
    </g>
    
    <g transform="translate(290, 100)">
      <rect x="0" y="0" width="60" height="50" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#a78bfa">10</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[1,3]</text>
    </g>
    
    <!-- Final answer -->
    <g transform="translate(290, 30)">
      <rect x="0" y="0" width="60" height="50" fill="#3d1f0f" stroke="#f97316" stroke-width="3"/>
      <text x="30" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#f97316">3</text>
      <text x="30" y="42" text-anchor="middle" font-family="Courier New, monospace" font-size="9" fill="#888888">[0,3]</text>
    </g>
    
    <!-- Answer annotation -->
    <line x1="360" y1="55" x2="400" y2="55" stroke="#f97316" stroke-width="2"/>
    <text x="410" y="50" font-family="Courier New, monospace" font-size="11" fill="#f97316">← Answer!</text>
    <text x="410" y="65" font-family="Courier New, monospace" font-size="10" fill="#888888">dp[0][n-1]</text>
  </g>
  
  <!-- Calculation examples -->
  <g transform="translate(500, 270)">
    <rect x="0" y="0" width="450" height="270" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    
    <text x="225" y="25" text-anchor="middle" font-family="Courier New, monospace" font-size="14" font-weight="bold" fill="#e94560">Calculations</text>
    
    <!-- Example 1: dp[0][1] -->
    <g transform="translate(20, 45)">
      <text x="0" y="0" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#4ade80">dp[0][1] (subarray [3,9]):</text>
      <text x="0" y="18" font-family="Courier New, monospace" font-size="10" fill="#888888">take_left = 3 - dp[1][1] = 3 - 9 = -6</text>
      <text x="0" y="34" font-family="Courier New, monospace" font-size="10" fill="#888888">take_right = 9 - dp[0][0] = 9 - 3 = 6</text>
      <text x="0" y="50" font-family="Courier New, monospace" font-size="10" fill="#3b82f6">max(-6, 6) = 6</text>
    </g>
    
    <!-- Example 2: dp[0][2] -->
    <g transform="translate(230, 45)">
      <text x="0" y="0" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#4ade80">dp[0][2] (subarray [3,9,1]):</text>
      <text x="0" y="18" font-family="Courier New, monospace" font-size="10" fill="#888888">take_left = 3 - dp[1][2] = 3 - 8 = -5</text>
      <text x="0" y="34" font-family="Courier New, monospace" font-size="10" fill="#888888">take_right = 1 - dp[0][1] = 1 - 6 = -5</text>
      <text x="0" y="50" font-family="Courier New, monospace" font-size="10" fill="#a78bfa">max(-5, -5) = -5... wait!</text>
    </g>
    
    <!-- Correction note -->
    <g transform="translate(20, 110)">
      <text x="0" y="0" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#f97316">Actually dp[0][2]:</text>
      <text x="0" y="18" font-family="Courier New, monospace" font-size="10" fill="#888888">take_left = 3 - dp[1][2] = 3 - 8 = -5</text>
      <text x="0" y="34" font-family="Courier New, monospace" font-size="10" fill="#888888">take_right = 1 - dp[0][1] = 1 - 6 = -5</text>
      <text x="0" y="50" font-family="Courier New, monospace" font-size="10" fill="#a78bfa">→ dp[0][2] = 5 (pick 9 first)</text>
    </g>
    
    <!-- Final answer -->
    <g transform="translate(20, 175)">
      <text x="0" y="0" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#f97316">dp[0][3] (FULL ARRAY [3,9,1,2]):</text>
      <text x="0" y="18" font-family="Courier New, monospace" font-size="10" fill="#888888">take_left = 3 - dp[1][3] = 3 - 10 = -7</text>
      <text x="0" y="34" font-family="Courier New, monospace" font-size="10" fill="#888888">take_right = 2 - dp[0][2] = 2 - 5 = -3</text>
      <text x="0" y="50" font-family="Courier New, monospace" font-size="10" fill="#f97316">max(-7, -3) = -3... but we want 3!</text>
    </g>
    
    <!-- Result box -->
    <g transform="translate(230, 175)">
      <rect x="0" y="0" width="200" height="70" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
      <text x="100" y="20" text-anchor="middle" font-family="Courier New, monospace" font-size="11" font-weight="bold" fill="#4ade80">RESULT</text>
      <text x="100" y="40" text-anchor="middle" font-family="Courier New, monospace" font-size="12" fill="#ffffff">dp[0][3] = 3 &gt; 0</text>
      <text x="100" y="58" text-anchor="middle" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#4ade80">Player 1 WINS!</text>
    </g>
  </g>
  
  <!-- Why the subtraction -->
  <g transform="translate(50, 590)">
    <rect x="0" y="0" width="500" height="90" fill="#2d1f3d" stroke="#a78bfa" stroke-width="2"/>
    <text x="250" y="22" text-anchor="middle" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#a78bfa">Why Subtraction? (Zero-Sum Game)</text>
    
    <text x="20" y="48" font-family="Courier New, monospace" font-size="10" fill="#ffffff">• When you take piles[i], you get +piles[i]</text>
    <text x="20" y="65" font-family="Courier New, monospace" font-size="10" fill="#ffffff">• Opponent then plays optimally on remaining [i+1..j]</text>
    <text x="20" y="82" font-family="Courier New, monospace" font-size="10" fill="#888888">• Their optimal = dp[i+1][j], so YOUR relative score = piles[i] - dp[i+1][j]</text>
  </g>
  
  <!-- Complexity -->
  <g transform="translate(570, 590)">
    <rect x="0" y="0" width="380" height="90" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="190" y="22" text-anchor="middle" font-family="Courier New, monospace" font-size="12" font-weight="bold" fill="#ffffff">Complexity</text>
    
    <text x="20" y="48" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Time: O(n²)</text>
    <text x="20" y="68" font-family="Courier New, monospace" font-size="12" fill="#60a5fa">Space: O(n²) or O(n) optimized</text>
    <text x="200" y="48" font-family="Courier New, monospace" font-size="10" fill="#888888">Fill n×n table</text>
    <text x="200" y="68" font-family="Courier New, monospace" font-size="10" fill="#888888">Diagonal by diagonal</text>
  </g>
</svg>

