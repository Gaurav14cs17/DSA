<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 950 700">
  <rect width="950" height="700" fill="#0f0f23"/>
  
  <!-- Title -->
  <text x="475" y="40" fill="#ffffff" font-family="Courier New, monospace" font-size="26" font-weight="bold" text-anchor="middle">üî∫ CONVEX HULL TRICK (CHT)</text>
  <text x="475" y="65" fill="#888888" font-family="Courier New, monospace" font-size="16" text-anchor="middle">Linear Function Optimization: O(n¬≤) ‚Üí O(n log n)</text>
  
  <!-- Problem Pattern -->
  <text x="250" y="105" fill="#e94560" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">PROBLEM PATTERN</text>
  
  <rect x="50" y="115" width="400" height="70" rx="5" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
  <text x="250" y="145" fill="#ffffff" font-family="Courier New, monospace" font-size="14" text-anchor="middle">dp[i] = min/max(m[j] √ó x[i] + b[j])</text>
  <text x="250" y="170" fill="#888888" font-family="Courier New, monospace" font-size="12" text-anchor="middle">for all j &lt; i</text>
  
  <!-- Key insight -->
  <text x="700" y="105" fill="#e94560" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">KEY INSIGHT</text>
  
  <rect x="500" y="115" width="400" height="70" rx="5" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
  <text x="700" y="140" fill="#4ade80" font-family="Courier New, monospace" font-size="12" text-anchor="middle">Each state j defines a LINE: y = m[j]¬∑x + b[j]</text>
  <text x="700" y="160" fill="#4ade80" font-family="Courier New, monospace" font-size="12" text-anchor="middle">Query at x[i] = find min/max y among all lines</text>
  <text x="700" y="180" fill="#ffffff" font-family="Courier New, monospace" font-size="12" text-anchor="middle">‚Üí Maintain LOWER ENVELOPE (convex hull)</text>
  
  <!-- Geometric Visualization -->
  <text x="300" y="215" fill="#e94560" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">GEOMETRIC VIEW: LOWER ENVELOPE</text>
  
  <!-- Coordinate system -->
  <g transform="translate(80, 240)">
    <!-- Axes -->
    <line x1="0" y1="200" x2="400" y2="200" stroke="#3b82f6" stroke-width="2"/>
    <line x1="0" y1="0" x2="0" y2="200" stroke="#3b82f6" stroke-width="2"/>
    <text x="390" y="220" fill="#3b82f6" font-family="Courier New, monospace" font-size="12">x</text>
    <text x="-15" y="10" fill="#3b82f6" font-family="Courier New, monospace" font-size="12">y</text>
    
    <!-- Line 1 (steep, m=-3) -->
    <line x1="0" y1="30" x2="150" y2="180" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="20" y="25" fill="#ef4444" font-family="Courier New, monospace" font-size="10">L1: y=-3x+30</text>
    
    <!-- Line 2 (medium, m=-1.5) -->
    <line x1="0" y1="100" x2="250" y2="175" stroke="#f97316" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="180" y="120" fill="#f97316" font-family="Courier New, monospace" font-size="10">L2: y=-1.5x+100</text>
    
    <!-- Line 3 (flat, m=-0.5) -->
    <line x1="0" y1="160" x2="400" y2="185" stroke="#a78bfa" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="300" y="155" fill="#a78bfa" font-family="Courier New, monospace" font-size="10">L3: y=-0.5x+160</text>
    
    <!-- Lower envelope (bold) -->
    <polyline points="0,30 100,90 200,135 400,185" stroke="#4ade80" stroke-width="3" fill="none"/>
    
    <!-- Intersection points -->
    <circle cx="100" cy="90" r="5" fill="#4ade80"/>
    <text x="95" y="78" fill="#4ade80" font-family="Courier New, monospace" font-size="9">L1‚à©L2</text>
    
    <circle cx="200" cy="135" r="5" fill="#4ade80"/>
    <text x="195" y="123" fill="#4ade80" font-family="Courier New, monospace" font-size="9">L2‚à©L3</text>
    
    <!-- Query point -->
    <line x1="150" y1="0" x2="150" y2="200" stroke="#f97316" stroke-width="1" stroke-dasharray="3,3"/>
    <circle cx="150" cy="112" r="6" fill="#f97316"/>
    <text x="160" y="108" fill="#f97316" font-family="Courier New, monospace" font-size="10">query(x=150)</text>
    
    <!-- Legend -->
    <rect x="270" y="10" width="120" height="70" rx="3" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
    <line x1="280" y1="25" x2="310" y2="25" stroke="#4ade80" stroke-width="3"/>
    <text x="320" y="28" fill="#4ade80" font-family="Courier New, monospace" font-size="9">Lower envelope</text>
    <line x1="280" y1="45" x2="310" y2="45" stroke="#888888" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="320" y="48" fill="#888888" font-family="Courier New, monospace" font-size="9">Individual lines</text>
    <circle cx="295" cy="65" r="4" fill="#f97316"/>
    <text x="320" y="68" fill="#f97316" font-family="Courier New, monospace" font-size="9">Query point</text>
  </g>
  
  <!-- Optimal regions -->
  <g transform="translate(530, 240)">
    <rect x="0" y="0" width="370" height="200" rx="5" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="185" y="25" fill="#ffffff" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">OPTIMAL REGIONS</text>
    
    <!-- Region visualization -->
    <line x1="30" y1="170" x2="340" y2="170" stroke="#3b82f6" stroke-width="1"/>
    <text x="185" y="190" fill="#888888" font-family="Courier New, monospace" font-size="10" text-anchor="middle">x-axis</text>
    
    <!-- L1 region -->
    <rect x="30" y="50" width="80" height="30" rx="3" fill="#ef4444" fill-opacity="0.3" stroke="#ef4444" stroke-width="1"/>
    <text x="70" y="70" fill="#ef4444" font-family="Courier New, monospace" font-size="11" text-anchor="middle">L1 best</text>
    <text x="70" y="155" fill="#ef4444" font-family="Courier New, monospace" font-size="9" text-anchor="middle">x ‚àà [0, 100]</text>
    
    <!-- L2 region -->
    <rect x="120" y="50" width="90" height="30" rx="3" fill="#f97316" fill-opacity="0.3" stroke="#f97316" stroke-width="1"/>
    <text x="165" y="70" fill="#f97316" font-family="Courier New, monospace" font-size="11" text-anchor="middle">L2 best</text>
    <text x="165" y="155" fill="#f97316" font-family="Courier New, monospace" font-size="9" text-anchor="middle">x ‚àà [100, 200]</text>
    
    <!-- L3 region -->
    <rect x="220" y="50" width="110" height="30" rx="3" fill="#a78bfa" fill-opacity="0.3" stroke="#a78bfa" stroke-width="1"/>
    <text x="275" y="70" fill="#a78bfa" font-family="Courier New, monospace" font-size="11" text-anchor="middle">L3 best</text>
    <text x="275" y="155" fill="#a78bfa" font-family="Courier New, monospace" font-size="9" text-anchor="middle">x ‚àà [200, ‚àû)</text>
    
    <!-- Key property -->
    <text x="185" y="110" fill="#4ade80" font-family="Courier New, monospace" font-size="11" text-anchor="middle">Slopes in decreasing order!</text>
    <text x="185" y="128" fill="#888888" font-family="Courier New, monospace" font-size="10" text-anchor="middle">m[L1] &gt; m[L2] &gt; m[L3]</text>
  </g>
  
  <!-- Add Line Algorithm -->
  <text x="250" y="480" fill="#e94560" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">ADD LINE: Remove Redundant Lines</text>
  
  <g transform="translate(50, 500)">
    <!-- Before -->
    <rect x="0" y="0" width="180" height="100" rx="5" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="90" y="20" fill="#ffffff" font-family="Courier New, monospace" font-size="11" font-weight="bold" text-anchor="middle">BEFORE (3 lines)</text>
    <text x="90" y="45" fill="#4ade80" font-family="Courier New, monospace" font-size="10" text-anchor="middle">L1: m=-3, b=30</text>
    <text x="90" y="63" fill="#f97316" font-family="Courier New, monospace" font-size="10" text-anchor="middle">L2: m=-2, b=50 ‚Üê bad?</text>
    <text x="90" y="81" fill="#a78bfa" font-family="Courier New, monospace" font-size="10" text-anchor="middle">L3: m=-1, b=40</text>
    
    <!-- Arrow -->
    <text x="210" y="50" fill="#f97316" font-family="Courier New, monospace" font-size="18">‚Üí</text>
    
    <!-- Check -->
    <rect x="240" y="0" width="180" height="100" rx="5" fill="#3d1f0f" stroke="#f97316" stroke-width="2"/>
    <text x="330" y="20" fill="#f97316" font-family="Courier New, monospace" font-size="11" font-weight="bold" text-anchor="middle">CHECK BAD</text>
    <text x="330" y="45" fill="#ffffff" font-family="Courier New, monospace" font-size="9" text-anchor="middle">L1‚à©L2: x = (50-30)/(‚àí3‚àí(‚àí2)) = ‚àí20</text>
    <text x="330" y="63" fill="#ffffff" font-family="Courier New, monospace" font-size="9" text-anchor="middle">L2‚à©L3: x = (40-50)/(‚àí2‚àí(‚àí1)) = 10</text>
    <text x="330" y="81" fill="#ef4444" font-family="Courier New, monospace" font-size="10" text-anchor="middle">‚àí20 &gt; 10? NO ‚Üí L2 is bad!</text>
  </g>
  
  <!-- Query Algorithm -->
  <text x="700" y="480" fill="#e94560" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">QUERY: Binary Search</text>
  
  <g transform="translate(500, 500)">
    <rect x="0" y="0" width="400" height="100" rx="5" fill="#0f2f1f" stroke="#4ade80" stroke-width="2"/>
    <text x="200" y="25" fill="#4ade80" font-family="Courier New, monospace" font-size="12" font-weight="bold" text-anchor="middle">O(log n) Query</text>
    
    <text x="20" y="50" fill="#ffffff" font-family="Courier New, monospace" font-size="10">Binary search for optimal line at query point x</text>
    <text x="20" y="68" fill="#888888" font-family="Courier New, monospace" font-size="10">Compare value at mid vs mid+1</text>
    <text x="20" y="86" fill="#60a5fa" font-family="Courier New, monospace" font-size="10">If monotonic queries: O(1) with pointer!</text>
  </g>
  
  <!-- Transformation Example -->
  <text x="475" y="630" fill="#e94560" font-family="Courier New, monospace" font-size="14" font-weight="bold" text-anchor="middle">TRANSFORMATION EXAMPLE: Quadratic Cost</text>
  
  <g transform="translate(100, 645)">
    <rect x="0" y="0" width="750" height="45" rx="5" fill="#1e3a5f" stroke="#3b82f6" stroke-width="2"/>
    <text x="375" y="18" fill="#ffffff" font-family="Courier New, monospace" font-size="11" text-anchor="middle">dp[j] + (sum[i] - sum[j])¬≤ = (dp[j] + sum[j]¬≤) + (-2¬∑sum[j])¬∑sum[i] + sum[i]¬≤</text>
    <text x="375" y="35" fill="#4ade80" font-family="Courier New, monospace" font-size="11" text-anchor="middle">b[j] = dp[j] + sum[j]¬≤    m[j] = -2¬∑sum[j]    x = sum[i]</text>
  </g>
</svg>
